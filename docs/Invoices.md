---
description: BTCPay Server の請求書とは何か、そしてその管理方法を学びます。
tags:
  - 請求書
  - 支払いリクエスト
  - Bitcoin 請求書
  - 請求書ステータス
  - Bitcoin 請求書の管理
  - Bitcoin 請求処理
---
<!-- legacy-anchor-aliases -->
<span id="archived-invoices"></span>
<span id="invoice-statuses"></span>
<!-- /legacy-anchor-aliases -->


# BTCPay Server の請求書とは？

**請求書（invoice）** は、支払いを回収するために売り手が買い手へ発行する文書です。

BTCPay Server における請求書は、**定義された時間内**に固定為替レートで支払われるべき文書を表します。請求書に有効期限があるのは、指定時間内に為替レートを固定し、受け取り側を価格変動から保護するためです。

![Invoices](./img/invoice/Invoices.png)

BTCPay Server の中核機能は、Bitcoin 請求書管理システムとして動作できることです。請求書は受け取った支払いの追跡と管理に不可欠な仕組みです。

手動で支払いを受け取るために組み込みの [Wallet](/Wallet.md) を使う場合を除き、ストア内のすべての支払いは `Invoices` ページに表示されます。このページは支払いを日付順に集約して表示し、請求書管理や支払いトラブルシューティングの中心となります。

## 請求書ステータス

以下の表は BTCPay の一般的な請求書ステータスと推奨アクションを示しています。
アクションはあくまで推奨です。
最適な対応は、各ユーザーが自分のユースケースやビジネスに応じて判断してください。

| Invoice Status                 | Description                                                                                                                             | Action                                                                                                                      |
| ------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------- |
| **New**                        | 未払いで、請求書タイマーがまだ期限切れになっていない                                                                                   | なし                                                                                                                        |
| **New (paidPartial)**          | 一部のみ支払い済みで、請求書タイマーはまだ期限切れになっていない                                                                       | なし                                                                                                                        |
| **Expired**                    | 未払いで、請求書タイマーが期限切れ                                                                                                     | なし                                                                                                                        |
| **Expired (paidPartial)** \*\* | 一部のみ支払い済みで、かつ期限切れ                                                                                                     | 返金対応を相談するか、不足分の支払いを依頼。必要に応じて settled または invalid に手動変更                                |
| **Expired (paidLate)**         | 請求書タイマー期限切れ後に、全額支払い済み                                                                                             | 遅延確定を受け入れられるなら注文を処理、または返金対応を相談。                                                            | 必要に応じて settled または invalid に手動変更 |
| **Settled (paidOver)**         | 請求額を超過して支払い済みで settled。必要な承認数も満たしている                                                                       | 超過分返金を相談するか、購入者からの連絡を待つ                                                                            |
| **Processing**                 | 全額支払い済みだが、ストア設定で指定した承認数に達していない                                                                           | 承認を待つ（その後 settled になるはずです）                                                                                |
| **Processing (paidOver)**      | 請求額を超過して支払い済みだが、必要承認数に未達                                                                                       | settled になるまで待ち、超過分返金を相談するか、購入者からの連絡を待つ                                                    |
| **Settled**                    | 全額支払い済みで、ストア設定の必要承認数を満たした                                                                                     | 注文を履行                                                                                                                  |
| **Settled (marked)**           | processing または invalid から、手動で settled に変更                                                                                  | ストア管理者がこの支払いを settled に手動設定                                                                              |
| **Invalid\***                  | 支払いはあるが、ストア設定で指定時間内に十分な承認を得られなかった                                                                     | ブロックチェーンエクスプローラーで確認し、十分な承認がある場合は settled に手動変更                                       |
| **Invalid (marked)**           | settled または expired から、手動で invalid に変更                                                                                     | ストア管理者がこの支払いを invalid に手動設定                                                                              |
| **Invalid (paidOver)**         | 請求額超過で支払いはあるが、ストア設定で指定時間内に十分な承認を得られなかった                                                        | ブロックチェーンエクスプローラーで確認し、十分な承認がある場合は settled に手動変更                                       |

- - [Lightning Network](./LightningNetwork.md) 経由で支払われた請求書は、即時決済のため直ちに settled 状態になります。
- \*\* Paid Partial 請求書は、購入者が手数料を差し引く取引所ウォレットから支払った場合に発生しがちです。購入者がウォレットで誤った金額を入力した場合にも起こります。
- \*\*\* Invalid - ストアで invalid 請求書が多発する場合は、[ストア設定の invalid 請求書時間を調整](./FAQ/Stores.md#payment-invalid-if-transactions-fails-to-confirm-minutes-after-invoice-expiration) してください。

### 請求書詳細

請求書詳細ページには、請求書に関するすべての情報が表示されます。

請求書情報は、請求書ステータス、為替レートなどに基づいて自動生成されます。Point of Sale アプリのように商品情報付きで請求書を作成した場合は、商品情報も自動生成されます。購入者情報の収集については [こちら](./FAQ/Stores.md#how-to-collect-additional-buyer-information) を参照してください。

### 請求書フィルタリング

請求書は、検索ボタン横のクイックフィルター、または上部の（Help）リンクで表示切替できる詳細フィルターで絞り込めます。ユーザーは **filter invoices** により、ストア、order id、item id、ステータス、日付で絞り込みできます。

![Invoice Filtering](./img/invoice/InvoiceFiltering.gif)

### 請求書エクスポート

BTCPay Server の請求書は CSV または JSON 形式でエクスポートできます。請求書エクスポートと会計に関する詳細は、[こちらのページ](./Reporting.md) を参照してください。

## 請求書を返金する

何らかの理由で返金したい場合、請求書画面から簡単に返金を作成できます。詳細は [返金ドキュメント](/Refund.md) を参照してください。

## 請求書をアーカイブする

BTCPay Server のアドレス再利用防止機能により、ストアの請求書ページに期限切れ請求書が多く表示されるのは一般的です。表示から隠すには、一覧で対象を選択して **archived** としてマークします。archived 請求書は削除されません。archived 済み請求書への支払いも BTCPay Server は引き続き検知します（paidLate ステータス）。検索フィルターのドロップダウンで archived 請求書を選択すれば、いつでも閲覧できます。
