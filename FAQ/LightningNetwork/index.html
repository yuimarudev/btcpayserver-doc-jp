<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BTCPay Server</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="stylesheet" href="/styles/btcpayserver-variables.css">
    <meta name="description" content="BTCPay Server Official Documentation">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    
    <link rel="preload" href="/assets/css/0.styles.5d7f2299.css" as="style"><link rel="preload" href="/assets/js/app.41d43a50.js" as="script"><link rel="preload" href="/assets/js/2.d89b9797.js" as="script"><link rel="preload" href="/assets/js/51.e363eee4.js" as="script"><link rel="prefetch" href="/assets/js/1.6a40f62e.js"><link rel="prefetch" href="/assets/js/100.ca4cc1f9.js"><link rel="prefetch" href="/assets/js/101.50420f65.js"><link rel="prefetch" href="/assets/js/102.147b17f9.js"><link rel="prefetch" href="/assets/js/103.11ace39f.js"><link rel="prefetch" href="/assets/js/104.8b07fc7a.js"><link rel="prefetch" href="/assets/js/105.e2552678.js"><link rel="prefetch" href="/assets/js/106.4da2526f.js"><link rel="prefetch" href="/assets/js/107.a83f8dca.js"><link rel="prefetch" href="/assets/js/108.112074ca.js"><link rel="prefetch" href="/assets/js/109.d57342ff.js"><link rel="prefetch" href="/assets/js/110.2447313d.js"><link rel="prefetch" href="/assets/js/111.967f5f5b.js"><link rel="prefetch" href="/assets/js/112.4c616b5f.js"><link rel="prefetch" href="/assets/js/113.13543aa2.js"><link rel="prefetch" href="/assets/js/114.84450202.js"><link rel="prefetch" href="/assets/js/115.0c5400eb.js"><link rel="prefetch" href="/assets/js/116.12cd0a77.js"><link rel="prefetch" href="/assets/js/117.79661e15.js"><link rel="prefetch" href="/assets/js/118.3e2367e4.js"><link rel="prefetch" href="/assets/js/119.e974af82.js"><link rel="prefetch" href="/assets/js/12.9066faf5.js"><link rel="prefetch" href="/assets/js/120.fa26fa7d.js"><link rel="prefetch" href="/assets/js/121.266cb757.js"><link rel="prefetch" href="/assets/js/122.fd97cbaf.js"><link rel="prefetch" href="/assets/js/123.8eb917c3.js"><link rel="prefetch" href="/assets/js/124.ad7488ef.js"><link rel="prefetch" href="/assets/js/125.1669308a.js"><link rel="prefetch" href="/assets/js/126.2842d750.js"><link rel="prefetch" href="/assets/js/127.a998232b.js"><link rel="prefetch" href="/assets/js/128.1503aa5d.js"><link rel="prefetch" href="/assets/js/129.b9a346f8.js"><link rel="prefetch" href="/assets/js/13.1ca96bef.js"><link rel="prefetch" href="/assets/js/130.980fd89e.js"><link rel="prefetch" href="/assets/js/131.126d8781.js"><link rel="prefetch" href="/assets/js/132.c1aa6921.js"><link rel="prefetch" href="/assets/js/133.51f50033.js"><link rel="prefetch" href="/assets/js/134.92038745.js"><link rel="prefetch" href="/assets/js/135.801c25aa.js"><link rel="prefetch" href="/assets/js/136.7e4c0fb3.js"><link rel="prefetch" href="/assets/js/137.c84d6de4.js"><link rel="prefetch" href="/assets/js/138.f4d32967.js"><link rel="prefetch" href="/assets/js/139.f57bba53.js"><link rel="prefetch" href="/assets/js/14.b2386b42.js"><link rel="prefetch" href="/assets/js/140.83753326.js"><link rel="prefetch" href="/assets/js/141.20d019fe.js"><link rel="prefetch" href="/assets/js/142.99d96e76.js"><link rel="prefetch" href="/assets/js/143.fed27056.js"><link rel="prefetch" href="/assets/js/144.7b0a11ba.js"><link rel="prefetch" href="/assets/js/145.1180b284.js"><link rel="prefetch" href="/assets/js/146.9cf0e7a1.js"><link rel="prefetch" href="/assets/js/147.1327e83a.js"><link rel="prefetch" href="/assets/js/148.808e1371.js"><link rel="prefetch" href="/assets/js/149.0103ddf3.js"><link rel="prefetch" href="/assets/js/15.be760fe0.js"><link rel="prefetch" href="/assets/js/150.ddf290f4.js"><link rel="prefetch" href="/assets/js/151.c41f3b39.js"><link rel="prefetch" href="/assets/js/152.7231098c.js"><link rel="prefetch" href="/assets/js/153.cd57ef46.js"><link rel="prefetch" href="/assets/js/154.5f3aa682.js"><link rel="prefetch" href="/assets/js/155.3d88dd7d.js"><link rel="prefetch" href="/assets/js/156.9ae1558a.js"><link rel="prefetch" href="/assets/js/157.0df5a481.js"><link rel="prefetch" href="/assets/js/158.8c2cdbb4.js"><link rel="prefetch" href="/assets/js/159.7bf3afb9.js"><link rel="prefetch" href="/assets/js/16.25059ae3.js"><link rel="prefetch" href="/assets/js/160.782528d5.js"><link rel="prefetch" href="/assets/js/161.5851ee84.js"><link rel="prefetch" href="/assets/js/162.5b67db91.js"><link rel="prefetch" href="/assets/js/163.bd9d8099.js"><link rel="prefetch" href="/assets/js/164.ee5a5f0f.js"><link rel="prefetch" href="/assets/js/165.01807449.js"><link rel="prefetch" href="/assets/js/166.8b74c99a.js"><link rel="prefetch" href="/assets/js/167.2b9275ec.js"><link rel="prefetch" href="/assets/js/168.266cdade.js"><link rel="prefetch" href="/assets/js/169.9b2d39cf.js"><link rel="prefetch" href="/assets/js/17.d6de4168.js"><link rel="prefetch" href="/assets/js/170.13d94d19.js"><link rel="prefetch" href="/assets/js/171.1297eabe.js"><link rel="prefetch" href="/assets/js/172.f7def8fc.js"><link rel="prefetch" href="/assets/js/173.a2f907c2.js"><link rel="prefetch" href="/assets/js/174.b179db69.js"><link rel="prefetch" href="/assets/js/175.77b58bf0.js"><link rel="prefetch" href="/assets/js/176.53de02a9.js"><link rel="prefetch" href="/assets/js/177.147a784b.js"><link rel="prefetch" href="/assets/js/178.2eab7627.js"><link rel="prefetch" href="/assets/js/179.743de899.js"><link rel="prefetch" href="/assets/js/18.bf7be781.js"><link rel="prefetch" href="/assets/js/180.65eabc1d.js"><link rel="prefetch" href="/assets/js/181.05c37cc7.js"><link rel="prefetch" href="/assets/js/19.8d0bb424.js"><link rel="prefetch" href="/assets/js/20.2b439dba.js"><link rel="prefetch" href="/assets/js/21.b0857fc9.js"><link rel="prefetch" href="/assets/js/22.e160c374.js"><link rel="prefetch" href="/assets/js/23.5a3d1cea.js"><link rel="prefetch" href="/assets/js/24.a911bc55.js"><link rel="prefetch" href="/assets/js/25.f1011e7f.js"><link rel="prefetch" href="/assets/js/26.909e9156.js"><link rel="prefetch" href="/assets/js/27.169f2946.js"><link rel="prefetch" href="/assets/js/28.a28bcef5.js"><link rel="prefetch" href="/assets/js/29.67d4d255.js"><link rel="prefetch" href="/assets/js/3.4421db0f.js"><link rel="prefetch" href="/assets/js/30.920112c6.js"><link rel="prefetch" href="/assets/js/31.a2ce1bf8.js"><link rel="prefetch" href="/assets/js/32.7bd06d89.js"><link rel="prefetch" href="/assets/js/33.8c03ee2c.js"><link rel="prefetch" href="/assets/js/34.f3604d73.js"><link rel="prefetch" href="/assets/js/35.a1c47bcc.js"><link rel="prefetch" href="/assets/js/36.5e9a8a38.js"><link rel="prefetch" href="/assets/js/37.1f423f7f.js"><link rel="prefetch" href="/assets/js/38.bf1dca52.js"><link rel="prefetch" href="/assets/js/39.fe1ae875.js"><link rel="prefetch" href="/assets/js/4.487f4581.js"><link rel="prefetch" href="/assets/js/40.35c40ae6.js"><link rel="prefetch" href="/assets/js/41.b92534c4.js"><link rel="prefetch" href="/assets/js/42.f6b301d5.js"><link rel="prefetch" href="/assets/js/43.78edc318.js"><link rel="prefetch" href="/assets/js/44.aa45aeb3.js"><link rel="prefetch" href="/assets/js/45.d27022b4.js"><link rel="prefetch" href="/assets/js/46.be0190d3.js"><link rel="prefetch" href="/assets/js/47.fdd2f33e.js"><link rel="prefetch" href="/assets/js/48.2c35deb2.js"><link rel="prefetch" href="/assets/js/49.86a31a70.js"><link rel="prefetch" href="/assets/js/5.b571b42d.js"><link rel="prefetch" href="/assets/js/50.8a0855d3.js"><link rel="prefetch" href="/assets/js/52.3bcdd544.js"><link rel="prefetch" href="/assets/js/53.31fb9c8f.js"><link rel="prefetch" href="/assets/js/54.66970633.js"><link rel="prefetch" href="/assets/js/55.f44b58de.js"><link rel="prefetch" href="/assets/js/56.f13b7920.js"><link rel="prefetch" href="/assets/js/57.ee25fa70.js"><link rel="prefetch" href="/assets/js/58.41179f1d.js"><link rel="prefetch" href="/assets/js/59.6b66e701.js"><link rel="prefetch" href="/assets/js/6.9b4960f6.js"><link rel="prefetch" href="/assets/js/60.1fe3680e.js"><link rel="prefetch" href="/assets/js/61.1146d45b.js"><link rel="prefetch" href="/assets/js/62.3d30c935.js"><link rel="prefetch" href="/assets/js/63.5e61ca29.js"><link rel="prefetch" href="/assets/js/64.0a33316c.js"><link rel="prefetch" href="/assets/js/65.5ae1d398.js"><link rel="prefetch" href="/assets/js/66.3b1f8e2e.js"><link rel="prefetch" href="/assets/js/67.141000a1.js"><link rel="prefetch" href="/assets/js/68.095e54de.js"><link rel="prefetch" href="/assets/js/69.0c792005.js"><link rel="prefetch" href="/assets/js/7.b10858a7.js"><link rel="prefetch" href="/assets/js/70.4ebcf2ad.js"><link rel="prefetch" href="/assets/js/71.02b553f0.js"><link rel="prefetch" href="/assets/js/72.628b592c.js"><link rel="prefetch" href="/assets/js/73.a20763f1.js"><link rel="prefetch" href="/assets/js/74.b8a8bb63.js"><link rel="prefetch" href="/assets/js/75.7334c723.js"><link rel="prefetch" href="/assets/js/76.90c92ba6.js"><link rel="prefetch" href="/assets/js/77.5b927e9b.js"><link rel="prefetch" href="/assets/js/78.98976747.js"><link rel="prefetch" href="/assets/js/79.69be6175.js"><link rel="prefetch" href="/assets/js/8.d887e242.js"><link rel="prefetch" href="/assets/js/80.fcbd3d02.js"><link rel="prefetch" href="/assets/js/81.7c45643d.js"><link rel="prefetch" href="/assets/js/82.9adb1f33.js"><link rel="prefetch" href="/assets/js/83.138bcb7e.js"><link rel="prefetch" href="/assets/js/84.f8c31bb4.js"><link rel="prefetch" href="/assets/js/85.04898a05.js"><link rel="prefetch" href="/assets/js/86.9ae5f263.js"><link rel="prefetch" href="/assets/js/87.d9fb57b7.js"><link rel="prefetch" href="/assets/js/88.f99c22d3.js"><link rel="prefetch" href="/assets/js/89.7ba5b4f9.js"><link rel="prefetch" href="/assets/js/9.db25f738.js"><link rel="prefetch" href="/assets/js/90.e9c848ba.js"><link rel="prefetch" href="/assets/js/91.6701c7fc.js"><link rel="prefetch" href="/assets/js/92.f406f9ed.js"><link rel="prefetch" href="/assets/js/93.1ef3465f.js"><link rel="prefetch" href="/assets/js/94.e932756a.js"><link rel="prefetch" href="/assets/js/95.5f23461b.js"><link rel="prefetch" href="/assets/js/96.3ca29c2e.js"><link rel="prefetch" href="/assets/js/97.30b76563.js"><link rel="prefetch" href="/assets/js/98.49afb185.js"><link rel="prefetch" href="/assets/js/99.11dd3481.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.26b7afdb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d7f2299.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/btcpay-logo.svg" alt="BTCPay Server" class="logo"> <span class="site-name can-hide">BTCPay Server</span></a> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <button type="button" class="btcpay-theme-switch"><svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path transform="translate(1 1)" d="M2.72 0A3.988 3.988 0 000 3.78c0 2.21 1.79 4 4 4 1.76 0 3.25-1.14 3.78-2.72-.4.13-.83.22-1.28.22-2.21 0-4-1.79-4-4 0-.45.08-.88.22-1.28z" class="btcpay-theme-switch-dark"></path><path transform="translate(1 1)" d="M4 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 0 4 0zM1.5 1c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM.5 3.5c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm7 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM1.5 6c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zm5 0c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5-.22-.5-.5-.5zM4 7c-.28 0-.5.22-.5.5s.22.5.5.5.5-.22.5-.5S4.28 7 4 7z" class="btcpay-theme-switch-light"></path></svg></button></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links social"><div class="nav-item"><a href="https://btcpayserver.org/" target="_blank" rel="noopener noreferrer website" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.btcpayserver.org/" target="_blank" rel="noopener noreferrer chat" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/btcpayserver/" target="_blank" rel="noopener noreferrer github" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/BtcpayServer" target="_blank" rel="noopener noreferrer twitter" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <nav class="nav-links"><div class="nav-item"><a href="/Guide/" class="nav-link">
  User Guide
</a></div><div class="nav-item"><a href="/Deployment/" class="nav-link">
  Deployment
</a></div><div class="nav-item"><a href="/Development/" class="nav-link">
  Developers
</a></div><div class="nav-item"><a href="/Contribute/" class="nav-link">
  Contribute
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  FAQ
</a></div> <a href="https://github.com/btcpayserver/btcpayserver-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/FAQ/" class="sidebar-heading clickable router-link-active open"><span>FAQ and common issues</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/General/" class="sidebar-link">/FAQ/General/</a></li><li><a href="/FAQ/Deployment/" class="sidebar-link">/FAQ/Deployment/</a></li><li><a href="/FAQ/Synchronization/" class="sidebar-link">/FAQ/Synchronization/</a></li><li><a href="/FAQ/Integrations/" class="sidebar-link">/FAQ/Integrations/</a></li><li><a href="/FAQ/ServerSettings/" class="sidebar-link">/FAQ/ServerSettings/</a></li><li><a href="/FAQ/Stores/" class="sidebar-link">/FAQ/Stores/</a></li><li><a href="/FAQ/Wallet/" class="sidebar-link">/FAQ/Wallet/</a></li><li><a href="/FAQ/Apps/" class="sidebar-link">/FAQ/Apps/</a></li><li><a href="/FAQ/LightningNetwork/" aria-current="page" class="active sidebar-link">/FAQ/LightningNetwork/</a></li><li><a href="/FAQ/Altcoin/" class="sidebar-link">/FAQ/Altcoin/</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><span id="as-a-merchant-do-i-need-to-open-direct-channels"></span> <span id="can-i-use-a-pruned-node-with-ln-in-btcpay"></span> <span id="can-i-use-my-existing-ln-node-with-btcpay"></span> <span id="how-can-i-get-inbound-capacity-to-my-node"></span> <span id="how-many-users-can-use-lightning-network-in-btcpay"></span> <span id="how-to-announce-an-ipv6-address"></span> <span id="how-to-change-from-core-lightning-cln-to-lnd-or-vice-versa"></span> <span id="how-to-change-my-lnd-node-alias"></span> <span id="how-to-change-my-LND-Node-alias"></span> <span id="how-to-disable-on-chain-payments-and-use-ln-payments-only"></span> <span id="how-to-display-my-lightning-node-information-so-that-others-can-connect-to-me"></span> <span id="how-to-edit-lightningconfig"></span> <span id="how-to-edit-lndconf"></span> <span id="how-to-find-node-info-and-open-a-direct-channel-with-a-store-using-btcpay"></span> <span id="how-to-install-thunderhub"></span> <span id="how-to-restart-my-core-lightning-cln"></span> <span id="how-to-restart-my-lnd"></span> <span id="how-to-see-lnd-logs"></span> <span id="how-to-see-my-lightning-network-version"></span> <span id="i-get-warning-the-lightning-alias-variable-is-not-set-defaulting-to-a-blank-string-when-starting-container"></span> <span id="i-previously-installed-btcpayserver-without-lightning-can-i-enable-it"></span> <span id="i-switched-lightning-network-implementation-but-getting-no-payment-available-error"></span> <span id="lightning-network-core-lightning-cln-faq"></span> <span id="lightning-network-general-faq"></span> <span id="lightning-network-lnd-faq"></span> <span id="lightning-network-questions-and-support"></span> <span id="lnd-connection-issues-after-an-update"></span> <span id="what-s-the-default-directory-of-lnd-in-btcpay"></span> <span id="where-can-i-find-recovery-seed-backup-for-my-lightning-network-wallet-in-btcpay-server"></span> <span id="which-macaroon-needs-to-be-provided-for-external-nodes"></span></p> <h1 id="lightning-network-よくある質問"><a href="#lightning-network-よくある質問" class="header-anchor">#</a> Lightning Network よくある質問</h1> <p>このドキュメントでは、BTCPay の Lightning Network に関して、ユーザーがよく直面する質問や問題を整理しています。オフチェーンプロトコルを使い始める前に、リスクを把握してください。あわせて <a href="/LightningNetwork/">BTCPay での Lightning Network 入門</a> もお読みください。</p> <p></p><div class="table-of-contents"><ul><li><a href="#lightning-network-一般-faq">Lightning Network 一般 FAQ</a><ul><li><a href="#btcpay-では何人が-lightning-network-を利用できますか？">BTCPay では何人が Lightning Network を利用できますか？</a></li><li><a href="#btcpay-を使うストアのノード情報を確認し、直接チャネルを開くには？">BTCPay を使うストアのノード情報を確認し、直接チャネルを開くには？</a></li><li><a href="#加盟店として、直接チャネルを開く必要はありますか？">加盟店として、直接チャネルを開く必要はありますか？</a></li><li><a href="#自分のノードで受信容量（inbound-capacity）を得るには？">自分のノードで受信容量（inbound capacity）を得るには？</a></li><li><a href="#以前-lightning-なしで-btcpayserver-をインストールしました。後から有効化できますか？">以前 Lightning なしで BTCPayServer をインストールしました。後から有効化できますか？</a></li><li><a href="#btcpay-で-ln-と一緒に-pruned-node-を使えますか？">BTCPay で LN と一緒に pruned node を使えますか？</a></li><li><a href="#既存の-ln-ノードを-btcpay-と一緒に使えますか？">既存の LN ノードを BTCPay と一緒に使えますか？</a></li><li><a href="#core-lightning-cln-から-lnd、またはその逆に変更するには？">Core Lightning (CLN) から LND、またはその逆に変更するには？</a></li><li><a href="#lightning-network-実装を切り替えた後、-no-payment-available-エラーが出ます">Lightning Network 実装を切り替えた後、no payment available エラーが出ます</a></li><li><a href="#コンテナ起動時に-warning-the-lightning-alias-variable-is-not-set-defaulting-to-a-blank-string-が表示されます">コンテナ起動時に WARNING: The LIGHTNING_ALIAS variable is not set. Defaulting to a blank string が表示されます</a></li><li><a href="#他のユーザーが接続できるように、自分の-lightning-ノード情報を表示するには？">他のユーザーが接続できるように、自分の Lightning ノード情報を表示するには？</a></li><li><a href="#btcpay-server-の-lightning-network-ウォレットのリカバリーシードバックアップはどこで確認できますか？">BTCPay Server の Lightning Network ウォレットのリカバリーシードバックアップはどこで確認できますか？</a></li><li><a href="#オンチェーン決済を無効にして-ln-決済だけを使うには？">オンチェーン決済を無効にして LN 決済だけを使うには？</a></li><li><a href="#lightning-network-のバージョン確認方法は？">Lightning Network のバージョン確認方法は？</a></li><li><a href="#lightning-address-をリダイレクトする方法は？">Lightning Address をリダイレクトする方法は？</a></li></ul></li><li><a href="#lightning-network-lnd-よくある質問">Lightning Network LND よくある質問</a><ul><li><a href="#lnd-を再起動するには？">LND を再起動するには？</a></li><li><a href="#lnd-のオンチェーンウォレットを再スキャンするには？">LND のオンチェーンウォレットを再スキャンするには？</a></li><li><a href="#lnd-ログを確認するには？">LND ログを確認するには？</a></li><li><a href="#btcpay-における-lnd-のデフォルトディレクトリは？">BTCPay における LND のデフォルトディレクトリは？</a></li><li><a href="#外部ノード接続時にはどの-macaroon-を提供すべきですか？">外部ノード接続時にはどの macaroon を提供すべきですか？</a></li><li><a href="#アップデート後の-lnd-接続問題">アップデート後の LND 接続問題</a></li><li><a href="#lnd-ノードのエイリアスを変更するには？">LND ノードのエイリアスを変更するには？</a></li><li><a href="#lndconf-を編集するには？">lnd.conf を編集するには？</a></li><li><a href="#lnd-watchtower-に接続するには？">LND watchtower に接続するには？</a></li><li><a href="#lnd-watchtower-を実行するには？">LND watchtower を実行するには？</a></li><li><a href="#thunderhub-をインストールするには？">ThunderHub をインストールするには？</a></li></ul></li><li><a href="#lightning-network-core-lightning-cln-よくある質問">Lightning Network Core Lightning (CLN) よくある質問</a><ul><li><a href="#core-lightning-cln-を再起動するには？">Core Lightning (CLN) を再起動するには？</a></li><li><a href="#ipv6-アドレスをアナウンスするには？">IPv6 アドレスをアナウンスするには？</a></li><li><a href="#lightningconfig-を編集するには？">.lightning/config を編集するには？</a></li></ul></li><li><a href="#lightning-network-の質問とサポート">Lightning Network の質問とサポート</a></li></ul></div><p></p> <h2 id="lightning-network-一般-faq"><a href="#lightning-network-一般-faq" class="header-anchor">#</a> Lightning Network 一般 FAQ</h2> <p>ここでは、実装の種類に関係なく、BTCPay の LN に関する一般的な質問を扱います。</p> <h3 id="btcpay-では何人が-lightning-network-を利用できますか？"><a href="#btcpay-では何人が-lightning-network-を利用できますか？" class="header-anchor">#</a> BTCPay では何人が Lightning Network を利用できますか？</h3> <p>セルフホストサーバーでは、内部 Lightning ノードは 1 つだけ利用できます。サーバー所有者は、自分の管理者アカウントに紐づく無制限のストアで同じ Lightning ノードを利用できます。</p> <p>バージョン 1.0.3.128 以降、BTCPay Server ホストは登録ユーザーに内部 Lightning Network ノードの利用を許可できます。<br>
これは <code>Server Settings &gt; Policies &gt; Allow non-admins to use the internal lightning node in their stores</code> で有効化できます。</p> <figure><img src="/assets/img/ThirdPartyEnableLNOthers.36c1ffc4.png" alt="他ユーザー向け LN の有効化" title="他ユーザー向け LN の有効化"></figure> <div class="custom-block warning"><p class="custom-block-title">サードパーティホストとして</p> <p>登録ユーザーの資金はすべてあなた自身の Lightning ウォレットに入ります。<br>
その後、各所有者へ手動で確認・再送金する必要があります。負担になる可能性があります。</p></div> <div class="custom-block danger"><p class="custom-block-title">サードパーティホストを利用する個人として</p> <p>Lightning Network 経由の支払いはすべてサードパーティのウォレットに入ります。<br>
資金を確実に取り戻せるよう、信頼できるサードパーティホストを使う場合にのみこの方法を使い、十分注意してください。</p></div> <p>管理者以外のユーザーは、自分の外部ノードへ接続することもできます。Lightning ノードの外部接続は高度な技術作業です。Lightning を使いたい場合は、必要な構成が一式そろっている自前サーバーのデプロイを推奨します。</p> <h3 id="btcpay-を使うストアのノード情報を確認し、直接チャネルを開くには？"><a href="#btcpay-を使うストアのノード情報を確認し、直接チャネルを開くには？" class="header-anchor">#</a> BTCPay を使うストアのノード情報を確認し、直接チャネルを開くには？</h3> <p>Lightning Network の請求書を支払いたい顧客の場合:</p> <ol><li>コイン選択で「Lightning」を選択します。</li> <li><code>Copy/Scan</code> を選択します。</li> <li><code>Node Info</code> を選択し、スキャンまたは手動コピーします。</li></ol> <figure><img src="/assets/img/btcpay-node-info.7e60d6c0.jpg" alt="BTCPay チェックアウト" title="BTCPay チェックアウト"></figure> <p>直接 Lightning Network チャネルを開く具体的な手順は、使用しているウォレットによって異なります。ただし、加盟店のノード情報があれば、進め方はすぐに分かるはずです。</p> <h3 id="加盟店として、直接チャネルを開く必要はありますか？"><a href="#加盟店として、直接チャネルを開く必要はありますか？" class="header-anchor">#</a> 加盟店として、直接チャネルを開く必要はありますか？</h3> <p>加盟店には受信チャネルが必要です。他者が加盟店にチャネルを開くと、加盟店側の流動性が増えます。顧客はあなたに直接チャネルを開けるはずです。</p> <p>接続性の高いノードに、あなた宛ての直接チャネル開設を依頼することもできます。チャネル開設は資金の消費ではなく、プリペイドカードに資金を入れて後で使う、またはチャネルを閉じて引き出すのに近いイメージです。</p> <h3 id="自分のノードで受信容量（inbound-capacity）を得るには？"><a href="#自分のノードで受信容量（inbound-capacity）を得るには？" class="header-anchor">#</a> 自分のノードで受信容量（inbound capacity）を得るには？</h3> <p>受信容量（inbound capacity）を得る方法は多数あります。実践的なヒントとして、この <a href="https://medium.com/lightningto-me/practical-solutions-to-inbound-capacity-problem-in-lightning-network-60224aa13393" target="_blank" rel="noopener noreferrer">inbound capacity に関する記事<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> を推奨します。<br>
受信容量（inbound capacity）を依頼する際は、サービス側のルーティングポリシー手数料も考慮してください。</p> <h3 id="以前-lightning-なしで-btcpayserver-をインストールしました。後から有効化できますか？"><a href="#以前-lightning-なしで-btcpayserver-をインストールしました。後から有効化できますか？" class="header-anchor">#</a> 以前 Lightning なしで BTCPayServer をインストールしました。後から有効化できますか？</h3> <p>BTCPay Server では、最初のストア作成後でもいつでも Lightning を設定できます。<br>
現在、以下 3 つの Lightning Network 実装をサポートしています。</p> <ul><li><a href="https://github.com/lightningnetwork/lnd" target="_blank" rel="noopener noreferrer">LND<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/ElementsProject/lightning" target="_blank" rel="noopener noreferrer">Core Lightning (CLN)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/ACINQ/eclair" target="_blank" rel="noopener noreferrer">eclair<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <figure><img src="/assets/img/btcpaylightningfaq1.ed53f824.jpg" alt="ストアへの Lightning 接続" title="ストアへの Lightning 接続"></figure> <p>ストアでの Lightning 設定をさらに学びたい場合は、<a href="/LightningNetwork/">Lightning Network</a> ガイドをご覧ください。ストアを Lightning Network に接続できます。</p> <h3 id="btcpay-で-ln-と一緒に-pruned-node-を使えますか？"><a href="#btcpay-で-ln-と一緒に-pruned-node-を使えますか？" class="header-anchor">#</a> BTCPay で LN と一緒に pruned node を使えますか？</h3> <p>この実装は pruned node をサポートしているため、Core Lightning (CLN) の利用を推奨します。</p> <h3 id="既存の-ln-ノードを-btcpay-と一緒に使えますか？"><a href="#既存の-ln-ノードを-btcpay-と一緒に使えますか？" class="header-anchor">#</a> 既存の LN ノードを BTCPay と一緒に使えますか？</h3> <p>すでに十分な受信流動性（inbound liquidity）を持つ接続性の高い Lightning ノードがある場合、同梱ノードではなく既存ノードを BTCPay で使いたいかもしれません。</p> <p>その場合は、ストアの Lightning ノード設定ページ（<code>Store &gt; Settings &gt; Lightning &gt; Modify</code>）に移動します。そこで <code>Use a custom lightning node</code> を選択します。</p> <p>接続文字列は Lightning 実装ごとに異なります。詳細は <a href="/LightningNetwork/#connecting-an-external-lightning-node-in-btcpay">設定ページ</a> の接続設定ドキュメントを参照してください。</p> <h3 id="core-lightning-cln-から-lnd、またはその逆に変更するには？"><a href="#core-lightning-cln-から-lnd、またはその逆に変更するには？" class="header-anchor">#</a> Core Lightning (CLN) から LND、またはその逆に変更するには？</h3> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>切り替え前に、チャネルをすべて閉じ、Lightning ノードからオンチェーン資金・Lightning 資金の両方を引き出しておいてください。</p></div> <p>仮想マシンへ SSH ログインする必要があります。</p> <p>LND に切り替える場合:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_LIGHTNING</span><span class="token operator">=</span><span class="token string">&quot;lnd&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh <span class="token parameter variable">-i</span>
</code></pre></div><p>Core Lightning (CLN) に切り替える場合:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_LIGHTNING</span><span class="token operator">=</span><span class="token string">&quot;clightning&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh <span class="token parameter variable">-i</span>
</code></pre></div><h3 id="lightning-network-実装を切り替えた後、no-payment-available-エラーが出ます"><a href="#lightning-network-実装を切り替えた後、no-payment-available-エラーが出ます" class="header-anchor">#</a> Lightning Network 実装を切り替えた後、<code>no payment available</code> エラーが出ます</h3> <p>実装を切り替えた場合、ストア単位で Lightning 接続文字列を適切な実装に合わせて再設定する必要があります。<code>Stores &gt; Settings &gt; Lightning &gt; Setup &gt; Connection string</code> に進み、接続文字列画面の <code>click here</code> リンクをクリックしてください。</p> <h3 id="コンテナ起動時に-warning-the-lightning-alias-variable-is-not-set-defaulting-to-a-blank-string-が表示されます"><a href="#コンテナ起動時に-warning-the-lightning-alias-variable-is-not-set-defaulting-to-a-blank-string-が表示されます" class="header-anchor">#</a> コンテナ起動時に <code>WARNING: The LIGHTNING_ALIAS variable is not set. Defaulting to a blank string</code> が表示されます</h3> <p>これは無視して問題ありません。<br>
Lightning ノードのエイリアスを設定したい場合は、環境変数ファイルを開きます。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token function">vim</span> <span class="token variable">$BTCPAY_ENV_FILE</span>
</code></pre></div><p>そして <code>LIGHTNING_ALIAS</code> エントリを <code>LIGHTNING_ALIAS=myawesomenode</code> に追加または変更してください。</p> <h3 id="他のユーザーが接続できるように、自分の-lightning-ノード情報を表示するには？"><a href="#他のユーザーが接続できるように、自分の-lightning-ノード情報を表示するには？" class="header-anchor">#</a> 他のユーザーが接続できるように、自分の Lightning ノード情報を表示するには？</h3> <p>他のユーザーがあなたのノードへ接続するために必要な情報は、すでにチェックアウト画面に表示されています。加盟店によっては、顧客が事前接続できるようノード情報を表示したい場合があります。</p> <p>ノード情報を確認する方法はいくつかありますが、他者へ表示する最も簡単な方法は Lightning ノード情報ページの利用です。<code>Store &gt; Settings &gt; Lightning &gt; Modify</code> に移動してください。ページ下部に <code>Open Public Node Page</code> ボタンがあります。クリックすると情報が表示されます。このページは <code>&lt;iframe&gt;</code> で Web サイトへ埋め込めます。</p> <figure><img src="/assets/img/LightningNodepPageInfo.b96d25bc.png" alt="BTCPay チェックアウト" title="BTCPay チェックアウト"></figure> <h3 id="btcpay-server-の-lightning-network-ウォレットのリカバリーシードバックアップはどこで確認できますか？"><a href="#btcpay-server-の-lightning-network-ウォレットのリカバリーシードバックアップはどこで確認できますか？" class="header-anchor">#</a> BTCPay Server の Lightning Network ウォレットのリカバリーシードバックアップはどこで確認できますか？</h3> <p>以前の BTCPay は <code>noseedbackup</code> を使用していたため、LN ウォレットのバックアップやリカバリーシードの取得はできませんでした。これは当時、Lightning Network ではチャネル内資金のバックアップ手段がなく、オンチェーンウォレットのみが対象だったためです。<br>
現在の LND には、シードの存在に依存する static channel backup などの機能があります。<br>
ただし、Lightning Network は依然として実験段階であることを理解し、<a href="https://www.youtube.com/watch?v=5fMv8MpzLgQ" target="_blank" rel="noopener noreferrer">失ってもよい範囲<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> の資金のみを扱ってください。</p> <h4 id="シードありで-lnd-を使う（v103138-以降）"><a href="#シードありで-lnd-を使う（v103138-以降）" class="header-anchor">#</a> シードありで LND を使う（<a href="https://github.com/btcpayserver/btcpayserver/releases/tag/v1.0.3.138" target="_blank" rel="noopener noreferrer"><code>v1.0.3.138</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 以降）</h4> <p>LND Seed Backup サービスは以下にあります:</p> <ul><li><code>Server Settings &gt; Services &gt; LND Seed Backup</code></li></ul> <figure><img src="/assets/img/LND-Service-Seed-Backup.a5298c02.jpg" alt="LND Seed Backup サービス" title="LND Seed Backup サービス"></figure> <p>リカバリーシードは安全にバックアップして保管してください。シードはオンチェーン Lightning ウォレットのバックアップであり、static channel backup 実行にも必要です。</p> <figure><img src="/assets/img/LND-With-Seed-Example.3a3dd077.jpg" alt="LND Seed Backup の例" title="LND Seed Backup の例"></figure> <p>安全にバックアップできたら、サーバー上から削除できます。</p> <p>古いバージョンから <code>v1.0.3.138</code> へ移行する場合、移行方法については <a href="https://blog.btcpayserver.org/btcpay-lnd-migration" target="_blank" rel="noopener noreferrer">このブログ記事<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> が役立つかもしれません。</p> <h3 id="オンチェーン決済を無効にして-ln-決済だけを使うには？"><a href="#オンチェーン決済を無効にして-ln-決済だけを使うには？" class="header-anchor">#</a> オンチェーン決済を無効にして LN 決済だけを使うには？</h3> <p>方法は簡単に 2 つあります:</p> <ol><li><code>Store &gt; Settings &gt; Checkout experience &gt; Choose default payment method at checkout</code></li> <li><code>Store &gt; Settings &gt; Modify &gt; Uncheck the Enabled box</code> を実行してオンチェーン決済を無効化</li></ol> <h3 id="lightning-network-のバージョン確認方法は？"><a href="#lightning-network-のバージョン確認方法は？" class="header-anchor">#</a> Lightning Network のバージョン確認方法は？</h3> <p>Lightning Network のバージョンはコマンドラインから確認できます。<br>
LND の場合:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
./bitcoin-lncli.sh <span class="token builtin class-name">help</span>
</code></pre></div><p>Core Lightning (CLN) の場合:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
./bitcoin-lightning-cli.sh getinfo
</code></pre></div><p>Lightning ノードへリモート接続できる多くのウォレット（RTL、Zap、Zeus など）でも、フロントエンド上にバージョンが表示されます。</p> <h3 id="lightning-address-をリダイレクトする方法は？"><a href="#lightning-address-をリダイレクトする方法は？" class="header-anchor">#</a> Lightning Address をリダイレクトする方法は？</h3> <p>ユースケース: <code>pay.example.com</code> で BTCPay サーバーを運用しているが、<code>me@pay.example.com</code> より見た目が良い <code>me@example.com</code> を Lightning Address として使いたい場合。</p> <p>必要なのは、<code>example.com/.well-known/lnurlp/me</code> から <code>pay.example.com/.well-known/lnurlp/me</code> への <code>301</code> リダイレクト設定だけです。<br>
Web サーバー設定で実施できます。以下は nginx の例です:</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">server_name</span> example.com</span><span class="token punctuation">;</span>

  <span class="token comment"># Redirect Lightning Address requests to BTCPay Server</span>
  <span class="token directive"><span class="token keyword">rewrite</span> ^/\.well-known/lnurlp/(.*)$ https://pay.example.com/.well-known/lnurlp/<span class="token variable">$1</span> permanent</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="lightning-network-lnd-よくある質問"><a href="#lightning-network-lnd-よくある質問" class="header-anchor">#</a> Lightning Network LND よくある質問</h2> <p>ここでは、Lightning Network の <a href="https://github.com/lightningnetwork/lnd/issues" target="_blank" rel="noopener noreferrer">LND 実装<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> に関する一般的な質問を扱います。</p> <h3 id="lnd-を再起動するには？"><a href="#lnd-を再起動するには？" class="header-anchor">#</a> LND を再起動するには？</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token function">docker</span> restart btcpayserver_lnd_bitcoin
</code></pre></div><h3 id="lnd-のオンチェーンウォレットを再スキャンするには？"><a href="#lnd-のオンチェーンウォレットを再スキャンするには？" class="header-anchor">#</a> LND のオンチェーンウォレットを再スキャンするには？</h3> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>このフラグメントは、lnd のオンチェーンウォレット取引をリセットして再スキャンを発火させる目的で、一時的にのみ有効化してください。<br>
再スキャン成功後は必ずこのフラグメントを無効化してください。無効化しないと、再起動のたびにオンチェーンウォレットを再スキャンします。<br>
WARNING: 再スキャンで取得できるのは、アーカイブ済みブロック内の取引のみです（PRUNED ノードに注意）。</p></div> <p>環境変数では指定できない LND 設定を調整するには、<code>docker-compose-generator/docker-fragments/opt-lnd-wallet-rescan.custom.yml</code> に <a href="/Docker/#how-can-i-customize-the-generated-docker-compose-file">カスタムフラグメント</a> を次のように作成します:</p> <div class="language- extra-class"><pre class="language-text"><code>version: &quot;3&quot;
services:
  lnd_bitcoin:
    environment:
      LND_EXTRA_ARGS: |
        reset-wallet-transactions=1
  lnd_litecoin:
    environment:
      LND_EXTRA_ARGS: |
        reset-wallet-transactions=1
  lnd_bitcoingold:
    environment:
      LND_EXTRA_ARGS: |
        reset-wallet-transactions=1
</code></pre></div><p>この LND 機能の詳細は、<a href="https://github.com/lightningnetwork/lnd/blob/master/docs/recovery.md#forced-in-place-rescan" target="_blank" rel="noopener noreferrer">公式ドキュメント<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> を参照してください。</p> <h3 id="lnd-ログを確認するには？"><a href="#lnd-ログを確認するには？" class="header-anchor">#</a> LND ログを確認するには？</h3> <p>BTCPay Server（Docker インストール）で LND ノードのログを確認するには、次のコマンドを使います:</p> <p><code>docker logs --tail 40 btcpayserver_lnd_bitcoin</code></p> <p><code>40</code> は任意の数に変更できます。これは表示するログ行数を表します。ログの詳細は <a href="/Troubleshooting/">Troubleshooting ページ</a> を参照してください。</p> <h3 id="btcpay-における-lnd-のデフォルトディレクトリは？"><a href="#btcpay-における-lnd-のデフォルトディレクトリは？" class="header-anchor">#</a> BTCPay における LND のデフォルトディレクトリは？</h3> <p><code>/var/lib/docker/volumes/generated_lnd_bitcoin_datadir/_data</code></p> <h3 id="外部ノード接続時にはどの-macaroon-を提供すべきですか？"><a href="#外部ノード接続時にはどの-macaroon-を提供すべきですか？" class="header-anchor">#</a> 外部ノード接続時にはどの macaroon を提供すべきですか？</h3> <p>BTCPay Server は、請求書作成前に Lightning ノードが完全同期済みか確認するため <code>admin.macaroon</code> を必要とします。<br>
BTCPay Server 接続専用に macaroon を調整したい場合は、LND macaroon bakery を使ってください:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>lncli bakemacaroon address:read address:write info:read invoices:read invoices:write onchain:read
</code></pre></div><h3 id="アップデート後の-lnd-接続問題"><a href="#アップデート後の-lnd-接続問題" class="header-anchor">#</a> アップデート後の LND 接続問題</h3> <p>アップデート後、LND では認証失敗が起きることがあります。症状は次のとおりです:</p> <ul><li>ストア設定でノード接続テスト時に <code>Error while connecting to the API (The HTTP status code of the response was not expected (500).)</code> が出る</li> <li>Zap ウォレットで <code>Unable to connect to host: cannot retrieve macaroon: cannot get macaroon: root key with id 0 doesn’t exist</code> が出る</li></ul> <p>この場合、lnd の macaroon を削除して再起動する必要があります。</p> <p>Docker デプロイを使っている場合は、VM に SSH 接続して次のコマンドを実行してください:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/admin.macaroon
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/invoice.macaroon
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/readonly.macaroon
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/data/macaroons.db
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/data/chain/bitcoin/mainnet/invoice.macaroon
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/data/chain/bitcoin/mainnet/macaroons.db
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/data/chain/bitcoin/mainnet/readonly.macaroon
<span class="token function">docker</span> restart btcpayserver_lnd_bitcoin
</code></pre></div><p>macaroon が存在しない場合はエラーメッセージが出ますが、安全に無視できます。</p> <p>これにより以前の macaroon は無効になるため、Zap とは <code>Server Settings / Services / LND-gRPC</code> で手動再接続が必要です。</p> <h3 id="lnd-ノードのエイリアスを変更するには？"><a href="#lnd-ノードのエイリアスを変更するには？" class="header-anchor">#</a> LND ノードのエイリアスを変更するには？</h3> <p>LND ノードの表示名を変更するには、仮想マシンへ ssh ログインして以下を実行します:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token builtin class-name">cd</span> btcpayserver-docker
<span class="token builtin class-name">export</span> <span class="token assign-left variable">LIGHTNING_ALIAS</span><span class="token operator">=</span><span class="token string">&quot;namehere&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh <span class="token parameter variable">-i</span>
</code></pre></div><h3 id="lndconf-を編集するには？"><a href="#lndconf-を編集するには？" class="header-anchor">#</a> lnd.conf を編集するには？</h3> <p>環境変数で指定できない <a href="https://docs.lightning.engineering/lightning-network-tools/lnd/lnd.conf" target="_blank" rel="noopener noreferrer">LND 設定<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> を調整するには、<code>docker-compose-generator/docker-fragments/opt-lnd-config.custom.yml</code> に <a href="/Docker/#how-can-i-customize-the-generated-docker-compose-file">カスタムフラグメント</a> を次のように作成します:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">lnd_bitcoin</span><span class="token punctuation">:</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">LND_EXTRA_ARGS</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
        minchansize=1234567</span>
</code></pre></div><p><code>LND_EXTRA_ARGS</code> の値にカスタマイズを追加できます。例では <code>minchansize</code> を設定しています。</p> <p>その後、追加フラグメントへ設定を加えてセットアップを実行します:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$BTCPAYGEN_ADDITIONAL_FRAGMENTS</span>;opt-lnd-config.custom&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh <span class="token parameter variable">-i</span>
</code></pre></div><p>この方法でカスタム設定は config に追加され、アップデート後も維持されます。</p> <h3 id="lnd-watchtower-に接続するには？"><a href="#lnd-watchtower-に接続するには？" class="header-anchor">#</a> LND watchtower に接続するには？</h3> <p>LND watchtower に接続するには、<a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/docker-compose-generator/docker-fragments/opt-lnd-wtclient.yml" target="_blank" rel="noopener noreferrer"><code>opt-lnd-wtclient</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> フラグメントを組み込み、必要に応じて <code>LND_WTCLIENT_SWEEP_FEE</code> を設定します:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$BTCPAYGEN_ADDITIONAL_FRAGMENTS</span>;opt-lnd-wtclient&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">LND_WTCLIENT_SWEEP_FEE</span><span class="token operator">=</span><span class="token number">10</span> <span class="token comment"># Fee to be used for sweep transaction, 10 sat/vbyte is the default</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh <span class="token parameter variable">-i</span>
</code></pre></div><p>その後、watchtower 接続管理には <code>wtclient</code> RPC コマンドを使えます:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Connect to a remote watchtower</span>
./bitcoin-lncli.sh wtclient <span class="token function">add</span> PUBKEY@IP:PORT

<span class="token comment"># See your watchtower connections</span>
./bitcoin-lncli.sh wtclient towers
</code></pre></div><h3 id="lnd-watchtower-を実行するには？"><a href="#lnd-watchtower-を実行するには？" class="header-anchor">#</a> LND watchtower を実行するには？</h3> <p>LND インスタンスと並行して watchtower を実行するには、<a href="https://github.com/btcpayserver/btcpayserver-docker/blob/master/docker-compose-generator/docker-fragments/opt-lnd-watchtower.yml" target="_blank" rel="noopener noreferrer"><code>opt-lnd-watchtower</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> フラグメントを組み込みます:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$BTCPAYGEN_ADDITIONAL_FRAGMENTS</span>;opt-lnd-watchtower&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh <span class="token parameter variable">-i</span>
</code></pre></div><p>これでサーバー上で watchtower が利用可能になります。</p> <p>他の watchtower クライアント（<a href="">wtclient RPC commands</a> 経由）からの接続を許可するには、<code>docker-compose-generator/docker-fragments/opt-lnd-config.custom.yml</code> の <a href="/Docker/#how-can-i-customize-the-generated-docker-compose-file">カスタムフラグメント</a> に <code>watchtower.externalip</code> を次のように追加する必要があります:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">lnd_bitcoin</span><span class="token punctuation">:</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">LND_EXTRA_ARGS</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
        watchtower.externalip=YOUR_SERVER_IP</span>
</code></pre></div><p>その後、追加フラグメントへ設定を加え、ファイアウォールでポート <code>9911</code> を開放します:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Add the custom LND fragment</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$BTCPAYGEN_ADDITIONAL_FRAGMENTS</span>;opt-lnd-config.custom&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh <span class="token parameter variable">-i</span>

<span class="token comment"># Open port the watchtower RPC port in the firewall</span>
ufw allow <span class="token number">9911</span>/tcp
</code></pre></div><p><code>tower info</code> コマンドを実行すると、<code>uris</code> セクションに公開 watchtower インスタンスが表示されるはずです。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># ./bitcoin-lncli.sh tower info</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;pubkey&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;YOUR_TOWER_PUBKEY&quot;</span>,
    <span class="token string">&quot;listeners&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;172.23.0.9:9911&quot;</span>,
        <span class="token string">&quot;127.0.0.1:9911&quot;</span>
    <span class="token punctuation">]</span>,
    <span class="token string">&quot;uris&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;YOUR_TOWER_PUBKEY@YOUR_SERVER_IP:9911&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://docs.lightning.engineering/lightning-network-tools/lnd/watchtower" target="_blank" rel="noopener noreferrer">watchtower 設定<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> も参照してください。</p> <h3 id="thunderhub-をインストールするには？"><a href="#thunderhub-をインストールするには？" class="header-anchor">#</a> ThunderHub をインストールするには？</h3> <p>インスタンスに ThunderHub をインストールするには、以下を実行します:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$BTCPAYGEN_ADDITIONAL_FRAGMENTS</span>;opt-add-thunderhub&quot;</span>
<span class="token builtin class-name">.</span> btcpay-setup.sh <span class="token parameter variable">-i</span>
</code></pre></div><p><code>Unable to connect to this node</code> という警告が出る場合、LND 通信で使う証明書に正しいドメインが含まれていない可能性があります。LND は既存証明書を削除しない限り新しい証明書を生成しません。</p> <p>古い証明書と鍵を削除して LND に新規生成させるには、以下を実行します:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/tls.cert
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> btcpayserver_lnd_bitcoin <span class="token function">rm</span> /data/tls.key
<span class="token function">docker</span> restart btcpayserver_lnd_bitcoin
<span class="token function">docker</span> restart generated_bitcoin_thub_1
</code></pre></div><h2 id="lightning-network-core-lightning-cln-よくある質問"><a href="#lightning-network-core-lightning-cln-よくある質問" class="header-anchor">#</a> Lightning Network Core Lightning (CLN) よくある質問</h2> <p>ここでは、Lightning Network の <a href="https://github.com/ElementsProject/lightning/issues" target="_blank" rel="noopener noreferrer">Core Lightning (CLN)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 実装に関する一般的な質問を扱います。</p> <h3 id="core-lightning-cln-を再起動するには？"><a href="#core-lightning-cln-を再起動するには？" class="header-anchor">#</a> Core Lightning (CLN) を再起動するには？</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span> -
<span class="token function">docker</span> restart btcpayserver_clightning_bitcoin
</code></pre></div><h3 id="ipv6-アドレスをアナウンスするには？"><a href="#ipv6-アドレスをアナウンスするには？" class="header-anchor">#</a> IPv6 アドレスをアナウンスするには？</h3> <p>まず <code>bitcoin-clightning.yml</code> を Docker フラグメントフォルダへ <code>bitcoin-clightning.custom.yml</code> としてコピーします。<br>
重要: ファイル名は必ず <code>.custom.yml</code> で終える必要があります。そうしないと <code>btcpay-update.sh</code> 実行時に git コンフリクトが発生します。</p> <p>新しい <code>bitcoin-clightning.custom.yml</code> を次のように変更します:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">clightning_bitcoin</span><span class="token punctuation">:</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">LIGHTNINGD_OPT</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
        announce-addr=[ipv6 here]</span>
</code></pre></div><p>アドレスは 2 つの角括弧 <code>[]</code> の間に入れてください。</p> <p>続いてセットアップします:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;bitcoin-clightning.custom&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh <span class="token parameter variable">-i</span>
</code></pre></div><h3 id="lightningconfig-を編集するには？"><a href="#lightningconfig-を編集するには？" class="header-anchor">#</a> .lightning/config を編集するには？</h3> <p>環境変数で指定できない <a href="https://docs.corelightning.org/reference/lightningd-config" target="_blank" rel="noopener noreferrer">Core Lightning 設定<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> を調整するには、<code>docker-compose-generator/docker-fragments/opt-lightningd-config.custom.yml</code> に <a href="/Docker/#how-can-i-customize-the-generated-docker-compose-file">カスタムフラグメント</a> を次のように作成します:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">clightning_bitcoin</span><span class="token punctuation">:</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">LIGHTNINGD_OPT</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
        alias=MyNodeName
        rgb=003366</span>
</code></pre></div><p><code>LIGHTNINGD_OPT</code> の値にカスタマイズを追加できます。例では <code>alias</code> と <code>rgb</code> を設定しています。</p> <p>その後、追加フラグメントへ設定を加えてセットアップを実行します:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">BTCPAYGEN_ADDITIONAL_FRAGMENTS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$BTCPAYGEN_ADDITIONAL_FRAGMENTS</span>;opt-lightningd-config.custom&quot;</span>
<span class="token builtin class-name">.</span> ./btcpay-setup.sh <span class="token parameter variable">-i</span>
</code></pre></div><p>この方法でカスタム設定は config に追加され、アップデート後も維持されます。</p> <h2 id="lightning-network-の質問とサポート"><a href="#lightning-network-の質問とサポート" class="header-anchor">#</a> Lightning Network の質問とサポート</h2> <p>プロトコルが比較的新しいため、Lightning Network に関するコミュニティサポートはまだ限定的です。</p> <p>ここに記載されていない技術的な問題が Lightning Network 実装で発生した場合は、それぞれのコミュニティで質問することを検討してください。</p> <h4 id="lnd-サポート"><a href="#lnd-サポート" class="header-anchor">#</a> LND サポート</h4> <ul><li><a href="https://github.com/lightningnetwork/lnd/issues" target="_blank" rel="noopener noreferrer">LND GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://lightningcommunity.slack.com" target="_blank" rel="noopener noreferrer">Slack の Lightning コミュニティ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="core-lightning-cln-サポート"><a href="#core-lightning-cln-サポート" class="header-anchor">#</a> Core Lightning (CLN) サポート</h4> <ul><li><a href="https://github.com/ElementsProject/lightning/issues" target="_blank" rel="noopener noreferrer">CLN GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://t.me/lightningd" target="_blank" rel="noopener noreferrer">CLN Telegram グループ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://lightning.readthedocs.io/" target="_blank" rel="noopener noreferrer">CLN ドキュメント<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/edit/master/docs/FAQ/LightningNetwork.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="edit-link"><a href="https://github.com/btcpayserver/btcpayserver-doc/issues/new?title=Improve%20undefined&amp;body=I%20could%20not%20find%20the%20information%20I%20was%20looking%20for%20on%20the%20%22undefined%22%20page%20(%60%2FFAQ%2FLightningNetwork%2F%60).%0A%0A%5BPLEASE%20DESCRIBE%20HOW%20THE%20PAGE%20CAN%20BE%20IMPROVED%5D&amp;labels=question" target="_blank" rel="noopener noreferrer">Didn't find an answer?</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/FAQ/Apps/" class="prev">
        /FAQ/Apps/
      </a></span> <span class="next"><a href="/FAQ/Altcoin/">
        /FAQ/Altcoin/
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.41d43a50.js" defer></script><script src="/assets/js/2.d89b9797.js" defer></script><script src="/assets/js/51.e363eee4.js" defer></script>
  </body>
</html>
