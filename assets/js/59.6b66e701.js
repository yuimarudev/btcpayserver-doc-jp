(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{530:function(e,a,t){e.exports=t.p+"assets/img/HowToUpdateBTCPayServer.891964d2.png"},531:function(e,a,t){e.exports=t.p+"assets/img/HowToRestartBTCPayServer.83b09b76.png"},532:function(e,a,t){e.exports=t.p+"assets/img/notification-version.767f57d3.png"},533:function(e,a,t){e.exports=t.p+"assets/img/InviteUser.67842055.png"},534:function(e,a,t){e.exports=t.p+"assets/img/BTC-P2P.93be03a2.png"},983:function(e,a,t){"use strict";t.r(a);var s=t(17),r=Object(s.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[a("span",{attrs:{id:"files"}}),e._v(" "),a("span",{attrs:{id:"forgot-btcpay-admin-password"}}),e._v(" "),a("span",{attrs:{id:"how-can-i-check-my-btcpay-server-version-via-terminal"}}),e._v(" "),a("span",{attrs:{id:"how-can-i-see-my-btcpay-version"}}),e._v(" "),a("span",{attrs:{id:"how-to-add-a-new-user-by-invite"}}),e._v(" "),a("span",{attrs:{id:"how-to-add-google-analytics-code-to-btcpay"}}),e._v(" "),a("span",{attrs:{id:"how-to-allow-registration-on-my-btcpay-server"}}),e._v(" "),a("span",{attrs:{id:"how-to-configure-smtp-settings-in-btcpay"}}),e._v(" "),a("span",{attrs:{id:"how-to-customize-my-btcpay-theme-style"}}),e._v(" "),a("span",{attrs:{id:"how-to-disable-u2f-and-2fa-for-a-user"}}),e._v(" "),a("span",{attrs:{id:"how-to-hide-my-btcpay-server-from-search-engines"}}),e._v(" "),a("span",{attrs:{id:"how-to-modify-the-checkout-page"}}),e._v(" "),a("span",{attrs:{id:"how-to-remotely-connect-to-my-btcpay-full-node"}}),e._v(" "),a("span",{attrs:{id:"how-to-restart-btcpay-server"}}),e._v(" "),a("span",{attrs:{id:"how-to-ssh-into-my-btcpay-running-on-vps"}}),e._v(" "),a("span",{attrs:{id:"how-to-update-btcpay-server"}}),e._v(" "),a("span",{attrs:{id:"how-to-upload-files-to-btcpay"}}),e._v(" "),a("span",{attrs:{id:"maintainance"}}),e._v(" "),a("span",{attrs:{id:"policies"}}),e._v(" "),a("span",{attrs:{id:"services"}}),e._v(" "),a("span",{attrs:{id:"theme-customization"}}),e._v(" "),a("span",{attrs:{id:"what-is-btcpay-ssh-key-file"}}),e._v(" "),a("span",{attrs:{id:"error-maintenance-feature-requires-access-to-SSH-properly-configured-in-btcpayserver-configuration"}})]),e._v(" "),a("h1",{attrs:{id:"サーバー設定-faq"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#サーバー設定-faq"}},[e._v("#")]),e._v(" サーバー設定 FAQ")]),e._v(" "),a("p",[e._v("このドキュメントでは、サーバー設定に関する質問と問題を扱います。\nこれらの設定はサーバー管理者のみが利用できます。詳細は"),a("RouterLink",{attrs:{to:"/Walkthrough/"}},[e._v("ウォークスルーページ")]),e._v("を参照してください。")],1),e._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#メンテナンス"}},[e._v("メンテナンス")]),a("ul",[a("li",[a("a",{attrs:{href:"#btcpay-server-を更新するには？"}},[e._v("BTCPay Server を更新するには？")])]),a("li",[a("a",{attrs:{href:"#btcpay-server-を再起動するには？"}},[e._v("BTCPay Server を再起動するには？")])]),a("li",[a("a",{attrs:{href:"#vps-上で動作する-btcpay-に-ssh-接続するには？"}},[e._v("VPS 上で動作する BTCPay に SSH 接続するには？")])]),a("li",[a("a",{attrs:{href:"#管理者として、btcpay-server-上で何が動いているか確認するには？"}},[e._v("管理者として、BTCPay Server 上で何が動いているか確認するには？")])]),a("li",[a("a",{attrs:{href:"#btcpay-server-のバージョンを確認するには？"}},[e._v("BTCPay Server のバージョンを確認するには？")])]),a("li",[a("a",{attrs:{href:"#ターミナルで-btcpay-server-のバージョンを確認するには？"}},[e._v("ターミナルで BTCPay Server のバージョンを確認するには？")])]),a("li",[a("a",{attrs:{href:"#btcpay-ssh-key-file-とは？"}},[e._v("BTCPay SSH key file とは？")])]),a("li",[a("a",{attrs:{href:"#btcpay-管理者パスワードを忘れた場合は？"}},[e._v("BTCPay 管理者パスワードを忘れた場合は？")])]),a("li",[a("a",{attrs:{href:"#招待で新規ユーザーを追加するには？"}},[e._v("招待で新規ユーザーを追加するには？")])]),a("li",[a("a",{attrs:{href:"#ユーザーの-u2f-と-2fa-を無効化するには？"}},[e._v("ユーザーの U2F と 2FA を無効化するには？")])]),a("li",[a("a",{attrs:{href:"#btcpay-で-smtp-設定を行うには？"}},[e._v("BTCPay で SMTP 設定を行うには？")])]),a("li",[a("a",{attrs:{href:"#error-maintenance-feature-requires-access-to-ssh-properly-configured-in-btcpayserver-configuration"}},[e._v("Error: Maintenance feature requires access to SSH properly configured in BTCPayServer configuration")])]),a("li",[a("a",{attrs:{href:"#error-your-local-changes-to-the-following-files-would-be-overwritten-by-merge"}},[e._v("Error: Your local changes to the following files would be overwritten by merge")])]),a("li",[a("a",{attrs:{href:"#error-btcpay-sshkeyfile-is-not-set-when-running-the-docker-install-or-unable-to-update-through-server-settings-maintenance"}},[e._v("Error: BTCPAY_SSHKEYFILE is not set when running the docker install, or unable to update through Server Settings / Maintenance")])])])]),a("li",[a("a",{attrs:{href:"#テーマ-カスタマイズ"}},[e._v("テーマ / カスタマイズ")]),a("ul",[a("li",[a("a",{attrs:{href:"#btcpay-テーマスタイルをカスタマイズするには？"}},[e._v("BTCPay テーマスタイルをカスタマイズするには？")])]),a("li",[a("a",{attrs:{href:"#チェックアウトページを変更するには？"}},[e._v("チェックアウトページを変更するには？")])]),a("li",[a("a",{attrs:{href:"#btcpay-に-google-analytics-コードを追加するには？"}},[e._v("BTCPay に Google Analytics コードを追加するには？")])])])]),a("li",[a("a",{attrs:{href:"#ポリシー"}},[e._v("ポリシー")]),a("ul",[a("li",[a("a",{attrs:{href:"#btcpay-server-で登録を許可するには？"}},[e._v("BTCPay Server で登録を許可するには？")])]),a("li",[a("a",{attrs:{href:"#検索エンジンに-btcpay-server-を表示させないには？"}},[e._v("検索エンジンに BTCPay Server を表示させないには？")])])])]),a("li",[a("a",{attrs:{href:"#サービス"}},[e._v("サービス")]),a("ul",[a("li",[a("a",{attrs:{href:"#btcpay-フルノードへリモート接続するには？"}},[e._v("BTCPay フルノードへリモート接続するには？")])])])]),a("li",[a("a",{attrs:{href:"#ファイル"}},[e._v("ファイル")]),a("ul",[a("li",[a("a",{attrs:{href:"#btcpay-にファイルをアップロードするには？"}},[e._v("BTCPay にファイルをアップロードするには？")])])])])])]),a("p"),e._v(" "),a("h2",{attrs:{id:"メンテナンス"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#メンテナンス"}},[e._v("#")]),e._v(" メンテナンス")]),e._v(" "),a("h3",{attrs:{id:"btcpay-server-を更新するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-server-を更新するには？"}},[e._v("#")]),e._v(" BTCPay Server を更新するには？")]),e._v(" "),a("p",[e._v("BTCPay Server を更新する方法は2つあります。")]),e._v(" "),a("ol",[a("li",[e._v("ユーザーインターフェースから更新: Server Settings > Maintenance > Update")])]),e._v(" "),a("figure",[a("img",{attrs:{src:t(530),alt:"Updating BTCPay Server",title:"Updating BTCPay Server"}})]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[e._v("SSH で更新: "),a("code",[e._v("ssh")]),e._v(" で仮想マシンにログインし、次のコマンドを実行します。")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("su")]),e._v(" -\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" btcpayserver-docker\nbtcpay-update.sh\n")])])]),a("h3",{attrs:{id:"btcpay-server-を再起動するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-server-を再起動するには？"}},[e._v("#")]),e._v(" BTCPay Server を再起動するには？")]),e._v(" "),a("p",[e._v("BTCPay Server を再起動する方法は2つあります。")]),e._v(" "),a("ol",[a("li",[e._v("ユーザーインターフェースから再起動: Server Settings > Maintenance > Restart")])]),e._v(" "),a("figure",[a("img",{attrs:{src:t(531),alt:"Restarting BTCPay Server",title:"Restarting BTCPay Server"}})]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[e._v("SSH で再起動: "),a("code",[e._v("ssh")]),e._v(" で仮想マシンにログインし、次のコマンドを実行します。")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("su")]),e._v(" -\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" btcpayserver-docker\nbtcpay-restart.sh\n")])])]),a("h3",{attrs:{id:"vps-上で動作する-btcpay-に-ssh-接続するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vps-上で動作する-btcpay-に-ssh-接続するには？"}},[e._v("#")]),e._v(" VPS 上で動作する BTCPay に SSH 接続するには？")]),e._v(" "),a("p",[e._v("ドメインまたは IP で SSH 接続するには、次を実行します。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ssh domainuser@example.com (domain)\nor\nssh domainuser@70.32.86.175 (IP)\n\ndomainuser@example.com's password:\nyourPassword\n")])])]),a("p",[e._v("Enter キーを押します。")]),e._v(" "),a("p",[e._v("このコンピューターからサーバーへ初回接続する場合、次の出力が表示されます。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("The authenticity of host 'example.com (70.32.86.175)' can't be established.\nRSA key fingerprint is 3c:6d:5c:99:5d:b5:c6:25:5a:d3:78:8e:d2:f5:7a:01.\nAre you sure you want to continue connecting (yes/no)?\n\nyes\n")])])]),a("p",[e._v("または、PuTTY を使ったこの "),a("a",{attrs:{href:"https://github.com/JeffVandrewJr/patron/blob/master/SSH.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("LunaNode example"),a("OutboundLink")],1),e._v(" を参照してください。")]),e._v(" "),a("h3",{attrs:{id:"管理者として、btcpay-server-上で何が動いているか確認するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#管理者として、btcpay-server-上で何が動いているか確認するには？"}},[e._v("#")]),e._v(" 管理者として、BTCPay Server 上で何が動いているか確認するには？")]),e._v(" "),a("p",[e._v("BTCPay Server に SSH 接続し、次の1行でシステム内の "),a("code",[e._v("apps")]),e._v(" 一覧を確認できます。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('docker exec -ti $(docker ps -a -q -f "name=postgres_1") psql -U postgres -d btcpayservermainnet -c \'select "Name" from "Apps";\'\n')])])]),a("p",[a("code",[e._v("stores")]),e._v(" とその Web サイトの一覧を確認するには次を実行します。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('docker exec -ti $(docker ps -a -q -f "name=postgres_1") psql -U postgres -d btcpayservermainnet -c \'select "StoreName","StoreWebsite" from "Stores";\'\n')])])]),a("p",[e._v("ユーザー一覧を表示するには次を実行します。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('docker exec -ti $(docker ps -a -q -f "name=postgres_1") psql -U postgres -d btcpayservermainnet -c \'select "Id", "Email" from "AspNetUsers";\'\n')])])]),a("h3",{attrs:{id:"btcpay-server-のバージョンを確認するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-server-のバージョンを確認するには？"}},[e._v("#")]),e._v(" BTCPay Server のバージョンを確認するには？")]),e._v(" "),a("p",[e._v("サーバー管理者としてログインしているとき、"),a("strong",[e._v("ページフッター右下")]),e._v("で BTCPay Server のバージョンを確認できます。")]),e._v(" "),a("p",[e._v("v1.0.5.7 以降のデプロイでは、新しい BTCPay Server バージョンがリリースされると通知が自動表示されます。")]),e._v(" "),a("figure",[a("img",{attrs:{src:t(532),alt:"Version",title:"Version"}})]),e._v(" "),a("p",[e._v("注: この機能は BTCPay Server コンテナー内で "),a("code",[e._v("BTCPAY_UPDATEURL")]),e._v(" 環境変数を自動設定し、1日1回 "),a("a",{attrs:{href:"https://api.github.com/repos/btcpayserver/btcpayserver/releases/latest",target:"_blank",rel:"noopener noreferrer"}},[e._v("this Github endpoint"),a("OutboundLink")],1),e._v(" にリクエストします。サーバー管理者は Server Settings > Policies > Check releases on GitHub のポリシーを無効化することで、この通知を無効にできます。")]),e._v(" "),a("h3",{attrs:{id:"ターミナルで-btcpay-server-のバージョンを確認するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ターミナルで-btcpay-server-のバージョンを確認するには？"}},[e._v("#")]),e._v(" ターミナルで BTCPay Server のバージョンを確認するには？")]),e._v(" "),a("p",[a("code",[e._v("btcpayserver-docker")]),e._v(" フォルダーで次を実行します: "),a("code",[e._v("bitcoin-cli.sh getnetworkinfo")])]),e._v(" "),a("h3",{attrs:{id:"btcpay-ssh-key-file-とは？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-ssh-key-file-とは？"}},[e._v("#")]),e._v(" BTCPay SSH key file とは？")]),e._v(" "),a("p",[e._v("BTCPay SSH key を使うと、ユーザーインターフェースからサーバー更新やドメイン名変更を素早く行えます。")]),e._v(" "),a("h3",{attrs:{id:"btcpay-管理者パスワードを忘れた場合は？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-管理者パスワードを忘れた場合は？"}},[e._v("#")]),e._v(" BTCPay 管理者パスワードを忘れた場合は？")]),e._v(" "),a("p",[e._v("まず、BTCPay Server で「Register」をクリックして新規ユーザーを登録します。例: "),a("code",[e._v("newadmin@example.com")])]),e._v(" "),a("p",[e._v("Server Settings > Policies で登録が無効化されていて新規ユーザーを作成できない場合は、ポリシー設定をリセットする必要があります。フロントページの Register ボタンでユーザー作成できる場合、この手順は不要です。次のコマンドを実行してください（現在使われている他のサーバー設定も削除されます）。")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# In root")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("su")]),e._v(" -\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$BTCPAY_BASE_DIRECTORY")]),e._v("/btcpayserver-docker/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Re-open registrations")]),e._v("\n./btcpay-admin.sh reset-server-policy\n")])])]),a("p",[e._v("BTCPay Server に戻り、有効化された「Register」ボタンをクリックします。メニューに Register リンクが出ない場合はキャッシュが原因の可能性があります。"),a("code",[e._v("btcpay-restart.sh")]),e._v(" で再起動してください。")]),e._v(" "),a("p",[e._v("次に、新規登録したユーザー "),a("code",[e._v("newadmin@example.com")]),e._v(" を管理者に追加します。")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Set new user as admin")]),e._v("\n./btcpay-admin.sh set-user-admin newadmin@example.com\n")])])]),a("p",[e._v("これで "),a("code",[e._v("newadmin@example.com")]),e._v(" を管理者として利用できます。")]),e._v(" "),a("p",[e._v("管理者化する前にそのユーザーでログイン済みだった場合は、一度ログアウトして再ログインが必要です。")]),e._v(" "),a("p",[e._v("変更適用後、新しく作成した管理者ユーザーは自動的にはどのストアにも追加されません。BTCPayServer 2.0 以降なら新しいサーバー管理者を手動でストアに追加できます。古いバージョンでは、SMTP を設定してパスワードリセットメールを送るか、"),a("a",{attrs:{href:"https://github.com/rockstardev/BTCPayServerPlugins.RockstarDev/tree/master/Plugins/BTCPayServer.RockstarDev.Plugins.AdminPassReset",target:"_blank",rel:"noopener noreferrer"}},[e._v("R0ckstar Dev の "),a("strong",[e._v("Admin Pass Reset")]),e._v(" plugin"),a("OutboundLink")],1),e._v(" を使うことで旧サーバー管理者アカウント（およびストア）へのアクセスを復旧できます。")]),e._v(" "),a("h3",{attrs:{id:"招待で新規ユーザーを追加するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#招待で新規ユーザーを追加するには？"}},[e._v("#")]),e._v(" 招待で新規ユーザーを追加するには？")]),e._v(" "),a("p",[e._v("サーバー管理者は共有用の招待リンクを作成して新規ユーザーを追加できます。これによりサーバーで公開登録を無効化したまま、特定ユーザーのみを招待できます。操作は Server Settings > Add User (do not provide password) > Create account です。")]),e._v(" "),a("figure",[a("img",{attrs:{src:t(533),alt:"Invite User",title:"Invite User"}})]),e._v(" "),a("p",[e._v("管理者が配布できる共有リンクが表示されます。パスワード設定用メールも送信されます（メールが"),a("a",{attrs:{href:"#how-to-configure-smtp-settings-in-btcpay"}},[e._v("サーバーで設定済み")]),e._v("の場合）。新規ユーザーは招待リンクへの初回アクセス時にパスワードを作成します。")]),e._v(" "),a("h3",{attrs:{id:"ユーザーの-u2f-と-2fa-を無効化するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ユーザーの-u2f-と-2fa-を無効化するには？"}},[e._v("#")]),e._v(" ユーザーの U2F と 2FA を無効化するには？")]),e._v(" "),a("p",[e._v("登録済みユーザー（例: "),a("code",[e._v("user@example.com")]),e._v("）の U2F/2FA 設定を削除するには、次のコマンドを実行します。")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# In root")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("su")]),e._v(" -\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$BTCPAY_BASE_DIRECTORY")]),e._v("/btcpayserver-docker/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Disable U2F and 2FA")]),e._v("\n./btcpay-admin.sh disable-multifactor user@example.com\n")])])]),a("h3",{attrs:{id:"btcpay-で-smtp-設定を行うには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-で-smtp-設定を行うには？"}},[e._v("#")]),e._v(" BTCPay で SMTP 設定を行うには？")]),e._v(" "),a("p",[e._v("SMTP は各ストア設定で構成できます。管理者権限があればサーバー全体にも設定できます。")]),e._v(" "),a("p",[e._v("メールプロバイダーごとに設定が異なるため正確な値は案内できませんが、以下は Gmail の例です。")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("SMTP Host: smtp.gmail.com\nSMTP Port: 587\nSSL Protocol: ON\nTLS Protocol: ON\nSMTP Username: (your Gmail username)\nSMTP Password: (your Gmail password)\n")])])]),a("p",[e._v("Gmail では安全性の低いアプリからのアクセス許可が重要です。有効化は Manage Your Google Account > Security > Allow Less Secure Apps (On) です。この設定は未使用時に Google 側で自動的にオフになることがあります。SMTP が急に動かない場合はこの設定を確認してください。")]),e._v(" "),a("p",[e._v("Gmail アカウントで 2 段階認証を使っている場合は、"),a("a",{attrs:{href:"https://support.google.com/mail/answer/185833",target:"_blank",rel:"noopener noreferrer"}},[e._v("こちらの記事"),a("OutboundLink")],1),e._v("を参照してください。")]),e._v(" "),a("p",[e._v("BTCPay のテストメール機能で、メール送信が正常か確認してください。業務用途でより信頼性の高い SMTP を求める場合は、Mailgun のような専用メールサービスの利用を検討してください。")]),e._v(" "),a("p",[e._v("Maintenance feature requires access to SSH properly configured in BTCPayServer configuration")]),e._v(" "),a("h3",{attrs:{id:"error-maintenance-feature-requires-access-to-ssh-properly-configured-in-btcpayserver-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error-maintenance-feature-requires-access-to-ssh-properly-configured-in-btcpayserver-configuration"}},[e._v("#")]),e._v(" Error: Maintenance feature requires access to SSH properly configured in BTCPayServer configuration")]),e._v(" "),a("p",[e._v("Docker の問題により、BTCPay Server のメンテナンス機能設定が一時的に壊れる場合があります。通常は BTCPay Server を再起動すると解消します。ただしこのエラーが UI に表示されると再起動ボタンが無効になります。解決には "),a("a",{attrs:{href:"#how-to-restart-btcpay-server"}},[e._v("ssh で再起動")]),e._v(" してください。")]),e._v(" "),a("h3",{attrs:{id:"error-your-local-changes-to-the-following-files-would-be-overwritten-by-merge"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error-your-local-changes-to-the-following-files-would-be-overwritten-by-merge"}},[e._v("#")]),e._v(" Error: Your local changes to the following files would be overwritten by merge")]),e._v(" "),a("p",[e._v("誤ってファイルを編集してしまうと、次のエラーで更新機構が壊れる場合があります。")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("error: Your "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("local")]),e._v(" changes to the following files would be overwritten by merge:\n")])])]),a("p",[e._v("これを修正するには、"),a("a",{attrs:{href:"#how-to-ssh-into-my-btcpay-running-on-vps"}},[e._v("サーバーへ ssh 接続")]),e._v(" して次を実行します。")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("su")]),e._v(" -\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" btcpayserver-docker\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" reset "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--hard")]),e._v(" origin/master\n")])])]),a("h3",{attrs:{id:"error-btcpay-sshkeyfile-is-not-set-when-running-the-docker-install-or-unable-to-update-through-server-settings-maintenance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error-btcpay-sshkeyfile-is-not-set-when-running-the-docker-install-or-unable-to-update-through-server-settings-maintenance"}},[e._v("#")]),e._v(" Error: BTCPAY_SSHKEYFILE is not set when running the docker install, or unable to update through Server Settings / Maintenance")]),e._v(" "),a("p",[a("code",[e._v("docker-compose")]),e._v(" 実行時（"),a("code",[e._v("btcpay-up.sh")]),e._v(" または "),a("code",[e._v("btcpay-setup.sh")]),e._v("）に、次のようなメッセージが表示されることがあります。")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("WARNING: The BTCPAY_SSHKEYFILE variable is not set. Defaulting to a blank string.\nWARNING: The BTCPAY_SSHTRUSTEDFINGERPRINTS variable is not set. Defaulting to a blank string.\n")])])]),a("p",[a("code",[e._v("BTCPay Server")]),e._v(" は、フロントエンドから次の操作を行うために SSH アクセスを必要とします。")]),e._v(" "),a("ul",[a("li",[e._v("サーバー更新")]),e._v(" "),a("li",[e._v("サーバーのドメイン名変更")])]),e._v(" "),a("p",[e._v("次のコマンドで、SSH 経由のサーバーアクセスを BTCPay に付与できます。")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("su")]),e._v(" -\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Checkout latest BTCPay Server version")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$BTCPAY_BASE_DIRECTORY")]),e._v("/btcpayserver-docker\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" checkout "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" tag "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--sort")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-version:refname")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("awk")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'match($0, /^v[0-9]+\\.[0-9]+\\.[0-9]+$/)'")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("head")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-n")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),a("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Setup SSH access via private key")]),e._v("\nssh-keygen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" rsa "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" /root/.ssh/id_rsa_btcpay "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-q")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-P")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-m")]),e._v(" PEM\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("echo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"# Key used by BTCPay Server"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">>")]),e._v(" /root/.ssh/authorized_keys\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" /root/.ssh/id_rsa_btcpay.pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">>")]),e._v(" /root/.ssh/authorized_keys\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("BTCPAY_HOST_SSHKEYFILE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/root/.ssh/id_rsa_btcpay\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v(" ./btcpay-setup.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-i")]),e._v("\n")])])]),a("h2",{attrs:{id:"テーマ-カスタマイズ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#テーマ-カスタマイズ"}},[e._v("#")]),e._v(" テーマ / カスタマイズ")]),e._v(" "),a("h3",{attrs:{id:"btcpay-テーマスタイルをカスタマイズするには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-テーマスタイルをカスタマイズするには？"}},[e._v("#")]),e._v(" BTCPay テーマスタイルをカスタマイズするには？")]),e._v(" "),a("p",[e._v("BTCPay のテーマをカスタマイズする方法は2つあります。\n簡単な方法は、"),a("RouterLink",{attrs:{to:"/Development/Theme/"}},[e._v("Theme documentation")]),e._v(" にある通り、BTCPay 側でカスタムテーマ設定を選択または指定することです。")],1),e._v(" "),a("p",[e._v("より高度なテーマ変更では、BTCPay リポジトリを fork してデザイン変更を適用する必要が出ることが多いです。Docker イメージをビルドして Docker Hub に公開し、"),a("code",[e._v("BTCPAY_IMAGE")]),e._v(" 環境変数をあなたのイメージタグに設定（"),a("code",[e._v('export BTCPAY_IMAGE="your custom btcpay docker image"')]),e._v("）して、"),a("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver-docker",target:"_blank",rel:"noopener noreferrer"}},[e._v("BTCPay Docker"),a("OutboundLink")],1),e._v(" で通常通りセットアップ（"),a("code",[e._v(". ./btcpay-setup.sh -i")]),e._v("）を実行します。生成された docker compose を、カスタムイメージを使うように修正してください。")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v("fork した BTCPay Server では、BTCPay の更新ごとに新しいイメージを手動作成して同じ手順を毎回実施する必要があります。基本的にはデフォルト設定とテーマオプションを使うことを推奨します。")])]),e._v(" "),a("h3",{attrs:{id:"チェックアウトページを変更するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#チェックアウトページを変更するには？"}},[e._v("#")]),e._v(" チェックアウトページを変更するには？")]),e._v(" "),a("p",[e._v("BTCPay のチェックアウトページの見た目は、"),a("RouterLink",{attrs:{to:"/Development/Theme/#checkout-page-theme"}},[e._v("instructions here")]),e._v(" に従うことで簡単に変更できます。")],1),e._v(" "),a("h3",{attrs:{id:"btcpay-に-google-analytics-コードを追加するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-に-google-analytics-コードを追加するには？"}},[e._v("#")]),e._v(" BTCPay に Google Analytics コードを追加するには？")]),e._v(" "),a("p",[a("code",[e._v("~/wwwroot/checkout/js/core.js.")]),e._v(" に GA コードを埋め込むことで実現できます。これは最も簡単な方法ですが、BTCPay を更新するたびに再適用が必要です。コードを fork して手動デプロイする手間は省けます。更新のたびに Docker 更新後、同じ行を "),a("code",[e._v(".js")]),e._v(" ファイルへ再追加してください。")]),e._v(" "),a("h2",{attrs:{id:"ポリシー"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ポリシー"}},[e._v("#")]),e._v(" ポリシー")]),e._v(" "),a("h3",{attrs:{id:"btcpay-server-で登録を許可するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-server-で登録を許可するには？"}},[e._v("#")]),e._v(" BTCPay Server で登録を許可するには？")]),e._v(" "),a("p",[e._v("他ユーザーにサーバー登録と利用を許可するには、Server Settings > Policies で registration を有効化します。SMTP を"),a("a",{attrs:{href:"#how-to-configure-smtp-settings-in-btcpay"}},[e._v("正しく設定済み")]),e._v("であれば、スパムやボット登録を防ぐためにメール確認を要求できます。")]),e._v(" "),a("h3",{attrs:{id:"検索エンジンに-btcpay-server-を表示させないには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#検索エンジンに-btcpay-server-を表示させないには？"}},[e._v("#")]),e._v(" 検索エンジンに BTCPay Server を表示させないには？")]),e._v(" "),a("p",[e._v("Server Settings > Policies でサイトのインデックスを抑制すると、サーバーヘッダーに "),a("code",[e._v('<meta name="robots" content="noindex">')]),e._v(" が追加され、検索エンジンにインデックスしないよう通知できます。")]),e._v(" "),a("p",[e._v("このリクエストを実際に反映するかは検索エンジン側に依存し、ページが完全に検索結果から消えるまで時間がかかる場合があります。正確な反映時期は制御できず、Google など各検索エンジンのクローラーボットに依存します。")]),e._v(" "),a("h2",{attrs:{id:"サービス"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#サービス"}},[e._v("#")]),e._v(" サービス")]),e._v(" "),a("h3",{attrs:{id:"btcpay-フルノードへリモート接続するには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-フルノードへリモート接続するには？"}},[e._v("#")]),e._v(" BTCPay フルノードへリモート接続するには？")]),e._v(" "),a("p",[e._v("BTC-P2P 接続に対応した外部ウォレットを使っている場合、BTCPay フルノードへ簡単に接続できます。これにより、第三者サーバーへの情報漏えいを避け、自分のフルノードのみに依存できます。\n対応する BTC-P2P ウォレットを接続するには、"),a("strong",[e._v("Server Settings > Services > Full node P2P")]),e._v(" で QR コードを表示し、ウォレットで読み取るか、コピー＆ペーストで入力してください。")]),e._v(" "),a("figure",[a("img",{attrs:{src:t(534),alt:"BTC-P2P",title:"BTC-P2P"}})]),e._v(" "),a("p",[e._v("Services に Full node P2P が表示されない場合は、"),a("RouterLink",{attrs:{to:"/FAQ/Deployment/#how-do-i-activate-tor-on-my-btcpay-server"}},[e._v("サーバーで Tor を有効化")]),e._v("する必要がある可能性があります。")],1),e._v(" "),a("h2",{attrs:{id:"ファイル"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ファイル"}},[e._v("#")]),e._v(" ファイル")]),e._v(" "),a("h3",{attrs:{id:"btcpay-にファイルをアップロードするには？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-にファイルをアップロードするには？"}},[e._v("#")]),e._v(" BTCPay にファイルをアップロードするには？")]),e._v(" "),a("p",[e._v("BTCPay Server インスタンスにファイルをアップロードするには、まず Server Settings > Services で External Storage を有効化し、利用するストレージプロバイダーを選択します。次に Server Settings > Files でローカルファイルを参照・アップロードします。ストレージシステムの制限によっては、大きなファイルのアップロードが難しい場合があります。")])])}),[],!1,null,null,null);a.default=r.exports}}]);