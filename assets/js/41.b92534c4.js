(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{1014:function(t,e,a){"use strict";a.r(e);var l=a(17),v=Object(l.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[e("span",{attrs:{id:"approve-and-pay-a-payout"}})]),t._v(" "),e("h1",{attrs:{id:"pull-payments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-payments"}},[t._v("#")]),t._v(" Pull payments")]),t._v(" "),e("h2",{attrs:{id:"はじめに"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#はじめに"}},[t._v("#")]),t._v(" はじめに")]),t._v(" "),e("p",[t._v("従来、Bitcoin 支払いを行うには、受取人が自分の bitcoin アドレスを共有し、送金者が後でそのアドレスに送金します。"),e("br"),t._v("\nこの仕組みは、受取人が不在でも送金者が支払いを開始して受取人へ支払いを "),e("code",[t._v("push")]),t._v(" するため、"),e("code",[t._v("Push payment")]),t._v(" と呼ばれます。")]),t._v(" "),e("p",[t._v("では、役割を逆にするとどうなるでしょうか。")]),t._v(" "),e("p",[t._v("送金者が支払いを "),e("code",[t._v("push")]),t._v(" する代わりに、受取人が都合のよいタイミングで支払いを "),e("code",[t._v("pull")]),t._v(" できるようにしたらどうでしょうか。"),e("br"),t._v("\nこれが "),e("code",[t._v("Pull payment")]),t._v(" の考え方です。これにより、次のような新しい用途が生まれます。")]),t._v(" "),e("ul",[e("li",[t._v("サブスクリプションサービス（購読者が、サービス側に一定間隔で資金を引き出すことを許可する）")]),t._v(" "),e("li",[t._v("返金（加盟店が、顧客が都合のよい時にウォレットへ返金を引き出せるようにする）")]),t._v(" "),e("li",[t._v("フリーランサー向け時間課金（雇用側が、稼働報告に応じてフリーランサーがウォレットへ引き出せるようにする）")]),t._v(" "),e("li",[t._v("パトロネージ（支援者が、受取人の活動継続のため毎月引き出せるようにする）")]),t._v(" "),e("li",[t._v("自動売却（取引所の顧客が、毎月自動売却するために取引所へ資金引き出しを許可する）")]),t._v(" "),e("li",[t._v("残高出金システム（大量トランザクションを扱うサービスが、ユーザーの出金要求を受け、固定間隔で多数の支払いをまとめて処理できる）")])]),t._v(" "),e("p",[t._v("次の動画も参考にしてください。")]),t._v(" "),e("a",{staticClass:"ytEmbed",staticStyle:{"background-image":"url(https://img.youtube.com/vi/-e8lPd9NtPs/hqdefault.jpg)"},attrs:{href:"https://www.youtube.com/watch?v=-e8lPd9NtPs",title:"What is a pull payment","data-id":"-e8lPd9NtPs"}},[e("iframe",{attrs:{title:"What is a pull payment","data-src":"https://www.youtube-nocookie.com/embed/-e8lPd9NtPs?&autoplay=1&autohide=1&modestbranding=1&color=white&rel=0",frameborder:"0",allow:"autoplay;encrypted-media;picture-in-picture",allowfullscreen:""}})]),t._v(" "),e("h2",{attrs:{id:"概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),e("p",[t._v("送金者が "),e("code",[t._v("Pull payment")]),t._v(" を設定する際、次のプロパティを設定できます。")]),t._v(" "),e("ul",[e("li",[t._v("開始日")]),t._v(" "),e("li",[t._v("終了日（任意）")]),t._v(" "),e("li",[t._v("期間（任意）")]),t._v(" "),e("li",[t._v("上限額")]),t._v(" "),e("li",[t._v("単位（USD、BTC、Hours など）")]),t._v(" "),e("li",[t._v("利用可能な支払い方法")])]),t._v(" "),e("p",[t._v("その後、送金者はリンクを使って"),e("strong",[t._v("pull payment を共有")]),t._v("でき、受取人は "),e("code",[t._v("create a payout")]),t._v(" を実行できます。"),e("br"),t._v("\n受取人は payout について次を選択します。")]),t._v(" "),e("ul",[e("li",[t._v("使用する支払い方法")]),t._v(" "),e("li",[t._v("送金先")])]),t._v(" "),e("p",[t._v("payout が作成されると、現在の "),e("code",[t._v("period")]),t._v(" における "),e("code",[t._v("pull payment's limit")]),t._v(" に計上されます。"),e("br"),t._v("\nその後、送金者は payout を送る際の "),e("code",[t._v("rate")]),t._v(" を設定して payout を承認し、支払いを進めます。")]),t._v(" "),e("p",[t._v("送金者向けには、"),e("RouterLink",{attrs:{to:"/Wallet/"}},[t._v("BTCPay Internal Wallet")]),t._v(" から複数 payout をまとめて支払える、使いやすい方法を提供しています。")],1),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("\n +----------+           +-------------------+            +------------+\n |          |           |                   |            |            |\n |  Sender  |           |   BTCPay Server   |            |  Receiver  |\n |          |           |                   |            |            |\n +----------+           +-------------------+            +------------+\n      |                            |                            |\n      |                            |                            |\n      |          Create            |                            |\n      +---------------------------\x3e+                            |\n      |          Pull payment      |                            |\n      |                            |                            |\n      |                            |                            |\n      |          Share             |                            |\n      +--------------------------------------------------------\x3e+\n      |          Pull payment      |                            |\n      |                            |                            |\n      |                            |           Create           |\n      |                            +<---------------------------+\n      |                            |           Payout           |\n      |                            |                            |\n      |         Approve            |                            |\n      +---------------------------\x3e+                            v\n      |         Payout             |\n      |                            |\n      |         Pay                |\n      +---------------------------\x3e+\n      |         Payout             |\n      |                            |\n      |                            |\n      v                            v\n")])])]),e("p",[t._v("BTCPay Server は payout を自動で承認・支払いしない点に注意してください。将来のリリースでは、適切な条件下で自動支払いされる payout を検討予定です。"),e("br"),t._v("\n代わりに送金者へ通知が表示され、送金者が payout を承認して支払うかを選択します。")]),t._v(" "),e("h2",{attrs:{id:"greenfield-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#greenfield-api"}},[t._v("#")]),t._v(" Greenfield API")]),t._v(" "),e("p",[t._v("送金者と受取人の両方に対して、インスタンスの "),e("code",[t._v("/docs")]),t._v(" ページ（または "),e("a",{attrs:{href:"https://docs.btcpayserver.org/API/Greenfield/v1/",target:"_blank",rel:"noopener noreferrer"}},[t._v("public link"),e("OutboundLink")],1),t._v("）で確認できる完全な API を提供しています。")]),t._v(" "),e("p",[t._v("この API は pull payment の全機能を公開しているため、送金者は自身の用途に合わせて支払いを自動化できます。")]),t._v(" "),e("h2",{attrs:{id:"ユーザーインターフェース"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ユーザーインターフェース"}},[t._v("#")]),t._v(" ユーザーインターフェース")]),t._v(" "),e("p",[t._v("ユーザーインターフェースでは、可能な機能の一部のみを操作できます。")]),t._v(" "),e("h3",{attrs:{id:"pull-payment-を作成する"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-payment-を作成する"}},[t._v("#")]),t._v(" pull payment を作成する")]),t._v(" "),e("ol",[e("li",[t._v("ウォレットページ / pull payments に移動します\n"),e("img",{attrs:{src:a(666),alt:"BTCPay Server Pull Payment",title:"BTCPay Server Pull Payment"}})]),t._v(" "),e("li",[e("code",[t._v("Create a new pull payment")]),t._v(" をクリックします\n"),e("img",{attrs:{src:a(667),alt:"BTCPay Server Pull Payment",title:"BTCPay Server Pull Payment"}})]),t._v(" "),e("li",[t._v("pull payment 情報を入力し、"),e("code",[t._v("Create")]),t._v(" をクリックします\n"),e("img",{attrs:{src:a(668),alt:"BTCPay Server Pull Payment",title:"BTCPay Server Pull Payment"}})]),t._v(" "),e("li",[e("code",[t._v("View")]),t._v(" をクリックして pull payment ページに移動します")]),t._v(" "),e("li",[t._v("このページを支払いの受取人に共有します\n"),e("img",{attrs:{src:a(669),alt:"BTCPay Server Pull Payment",title:"BTCPay Server Pull Payment"}})]),t._v(" "),e("li",[t._v("受取人として、請求する "),e("code",[t._v("USD")]),t._v(" 金額と送金先アドレスを入力します。\n"),e("img",{attrs:{src:a(670),alt:"BTCPay Server Pull Payment",title:"BTCPay Server Pull Payment"}})])]),t._v(" "),e("h3",{attrs:{id:"payout-を承認して支払う"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#payout-を承認して支払う"}},[t._v("#")]),t._v(" payout を承認して支払う")]),t._v(" "),e("ol",[e("li",[t._v("受取人が資金を引き出すと、送金者に通知が届きます\n"),e("img",{attrs:{src:a(671),alt:"6",title:"6"}})]),t._v(" "),e("li",[t._v("通知をクリックすると、未処理 payout の一覧ページに移動します\n"),e("img",{attrs:{src:a(672),alt:"7",title:"7"}})]),t._v(" "),e("li",[t._v("承認して支払う payout を選択し、確認します\n"),e("img",{attrs:{src:a(673),alt:"8",title:"8"}})]),t._v(" "),e("li",[t._v("その後、BTCPay Server の通常のウォレット UI に移動します")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("Confirm selected payouts をクリックすると、ウォレットのストア設定にある現在の為替レートが使用されます。このレートは、支払いを完了しなくても固定されます。後で行う支払いでも、この以前に確定したレートが使われます。")])]),t._v(" "),e("h2",{attrs:{id:"pull-payments-機能の追加ユースケース"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pull-payments-機能の追加ユースケース"}},[t._v("#")]),t._v(" Pull Payments 機能の追加ユースケース")]),t._v(" "),e("p",[e("strong",[t._v("Pull Payment 機能")]),t._v("は複数の用途で利用でき、その 1 つが "),e("RouterLink",{attrs:{to:"/Refund/"}},[t._v("Refunds")]),t._v(" です。")],1)])}),[],!1,null,null,null);e.default=v.exports},666:function(t,e,a){t.exports=a.p+"assets/img/1.61c3b232.jpg"},667:function(t,e,a){t.exports=a.p+"assets/img/2.4ec63b47.jpg"},668:function(t,e,a){t.exports=a.p+"assets/img/3.0a39c840.jpg"},669:function(t,e,a){t.exports=a.p+"assets/img/4.e37e0402.png"},670:function(t,e,a){t.exports=a.p+"assets/img/5.29be95a6.png"},671:function(t,e,a){t.exports=a.p+"assets/img/6.861ee564.jpg"},672:function(t,e,a){t.exports=a.p+"assets/img/7.56e93cc1.jpg"},673:function(t,e,a){t.exports=a.p+"assets/img/8.e6a2f12e.jpg"}}]);