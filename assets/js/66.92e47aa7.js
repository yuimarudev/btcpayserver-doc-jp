(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1012:function(e,t,r){"use strict";r.r(t);var a=r(17),s=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"prestashop-連携"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prestashop-連携"}},[e._v("#")]),e._v(" PrestaShop 連携")]),e._v(" "),t("p",[e._v("このドキュメントでは、"),t("strong",[e._v("BTCPay Server を PrestaShop ストアに連携する方法")]),e._v("を説明します。"),t("br"),e._v("\nまだストアがない場合は、"),t("a",{attrs:{href:"https://blog.templatetoaster.com/how-to-install-prestashop/",target:"_blank",rel:"noopener noreferrer"}},[e._v("このステップバイステップの記事"),t("OutboundLink")],1),e._v("に従ってゼロから作成してください。")]),e._v(" "),t("p",[e._v("既存の PrestaShop ストアに BTCPay Server を連携するには、以下の手順に従ってください。")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("このドキュメントはモジュールの最新 "),t("em",[e._v("v6")]),e._v(" バージョンにのみ適用されます。その他のバージョン:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver-doc/blob/cba96292ceea9483711ab53c479a98357383f857/docs/PrestaShop.md",target:"_blank",rel:"noopener noreferrer"}},[t("em",[e._v("v4")]),e._v(" module documentation"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver-doc/blob/b1432054e147836d7286e1bae2f98e62f2752363/docs/PrestaShop.md",target:"_blank",rel:"noopener noreferrer"}},[t("em",[e._v("v5")]),e._v(" module documentation"),t("OutboundLink")],1)])])]),e._v(" "),t("h2",{attrs:{id:"サーバー要件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#サーバー要件"}},[e._v("#")]),e._v(" サーバー要件")]),e._v(" "),t("p",[e._v("このプラグインをインストールする前に、以下の要件を満たしていることを確認してください。")]),e._v(" "),t("ul",[t("li",[e._v("PHP 8.0 以上を使用している")]),e._v(" "),t("li",[e._v("PrestaShop が 8.0 以上である\n"),t("ul",[t("li",[e._v("ストアで HTTPS が有効になっており、公開アクセス可能であること")])])]),e._v(" "),t("li",[e._v("BTCPay Server が 1.7.0 以上である")]),e._v(" "),t("li",[e._v("PHP 拡張の PDO、curl、gd、intl、json、mbstring が利用可能である")]),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/Deployment/"}},[e._v("セルフホスト")]),e._v(" または "),t("RouterLink",{attrs:{to:"/Deployment/ThirdPartyHosting/"}},[e._v("サードパーティホスト")]),e._v(" の BTCPay Server を用意している\n"),t("ul",[t("li",[e._v("BTCPay Server インスタンスで HTTPS が有効になっており、公開アクセス可能であること")])])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/RegisterAccount/"}},[e._v("インスタンスに登録済みアカウントがある")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/CreateStore/"}},[e._v("インスタンスに BTCPay ストアがある")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/WalletSetup/"}},[e._v("ストアにウォレットが接続されている")])],1)]),e._v(" "),t("h2",{attrs:{id:"btcpay-プラグインをインストールする"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-プラグインをインストールする"}},[e._v("#")]),e._v(" BTCPay プラグインをインストールする")]),e._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://github.com/btcpayserver/prestashop-plugin/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("最新の BTCPay Server プラグインをダウンロード"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("PrestaShop > Modules > Module Manager > Upload a module")]),e._v(" "),t("li",[e._v("先ほどダウンロードした "),t("code",[e._v(".zip")]),e._v(" ファイルをアップロード")]),e._v(" "),t("li",[t("code",[e._v("configure")]),e._v(" をクリックしてモジュールを設定")])]),e._v(" "),t("figure",[t("img",{attrs:{src:r(661),alt:"BTCPay Server PrestaShop plugin installation",title:"BTCPay Server PrestaShop plugin installation"}})]),e._v(" "),t("h2",{attrs:{id:"ストアを接続する"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ストアを接続する"}},[e._v("#")]),e._v(" ストアを接続する")]),e._v(" "),t("p",[e._v("Prestashop の BTCPay Server モジュールは、"),t("strong",[e._v("あなたのサーバー（決済プロセッサ）と EC ストアをつなぐブリッジ")]),e._v("です。"),t("br"),e._v("\n手順 2 でセルフホストかサードパーティホストのどちらを選んでも、設定手順は同じです。")]),e._v(" "),t("ol",[t("li",[t("code",[e._v("BTCPay Server URL")]),e._v(" フィールドにホストの完全 URL（https を含む）を入力します。例: https://testnet.demo.btcpayserver.org")]),e._v(" "),t("li",[e._v("デフォルトのトランザクション速度を選択します（BTCPay が推奨する手数料額に影響します）。")]),e._v(" "),t("li",[t("em",[e._v("任意: ストアに適した注文モード（支払い前に注文作成 / 支払い後に注文作成）を選択します。")]),e._v(" "),t("ul",[t("li",[e._v("この項目は、該当ロジックが削除された v5.1.0 "),t("strong",[e._v("以前")]),e._v("を使用している場合のみ関係します。")])])]),e._v(" "),t("li",[e._v("記帳用途のために、顧客メタデータを BTCPay Server インスタンスへ送信するかどうかを選択します。")]),e._v(" "),t("li",[t("code",[e._v("Connect")]),e._v(" を押して設定を保存し、BTCPay Server インスタンスへリダイレクトして API キーを作成します。")]),e._v(" "),t("li",[e._v("API キー作成時は、必ず特定の 1 ストアに対して権限を付与してください（複数ストアは未対応です）。")])]),e._v(" "),t("figure",[t("img",{attrs:{src:r(662),alt:"BTCPay Server PrestaShop API key setup",title:"BTCPay Server PrestaShop API key setup"}})]),e._v(" "),t("ol",{attrs:{start:"7"}},[t("li",[t("code",[e._v("Authorize app")]),e._v(' ボタンを押すと Prestashop ストアへ戻ります。"Invalid Token" ポップアップが出る場合は、PrestaShop と BTCPay Server の両方で HTTPS が有効で、正しいホスト名を使っているか確認してください（'),t("a",{attrs:{href:"#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E8%A6%81%E4%BB%B6"}},[e._v("Server Requirements")]),e._v(" を参照）。")])]),e._v(" "),t("figure",[t("img",{attrs:{src:r(663),alt:"Invalid Token",title:"Invalid Token"}})]),e._v(" "),t("ol",{attrs:{start:"8"}},[t("li",[e._v("Prestashop が BTCPay Server インスタンスへの接続を試みます。")]),e._v(" "),t("li",[e._v("接続に成功するとメッセージが表示されます（ただし、テスト購入を行うことをおすすめします）。")])]),e._v(" "),t("figure",[t("img",{attrs:{src:r(664),alt:"BTCPay Server PrestaShop setup finished",title:"BTCPay Server PrestaShop setup finished"}})]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("BTCPay Server からのリダイレクトは、PrestaShop 側の挙動により失敗することがあります。その場合でも、"),t("code",[e._v("/account/apikeys")]),e._v(" から API キーをコピーしてフォームに貼り付ければ、このプラグインを利用できます。")])]),e._v(" "),t("h3",{attrs:{id:"api-キーを手動で作成する"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api-キーを手動で作成する"}},[e._v("#")]),e._v(" API キーを手動で作成する")]),e._v(" "),t("p",[e._v("必要に応じて、"),t("code",[e._v("/account/addapikey")]),e._v(" で API キーを手動作成することもできます。手動で作成する場合は、"),t("em",[e._v("単一")]),e._v(" のストアに対して次の権限を持つようにしてください。")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("btcpay.store.canmodifystoresettings")])]),e._v(" "),t("li",[t("code",[e._v("btcpay.store.webhooks.canmodifywebhooks")])]),e._v(" "),t("li",[t("code",[e._v("btcpay.store.canviewstoresettings")])]),e._v(" "),t("li",[t("code",[e._v("btcpay.store.cancreateinvoice")])]),e._v(" "),t("li",[t("code",[e._v("btcpay.store.canviewinvoices")])]),e._v(" "),t("li",[t("code",[e._v("btcpay.store.canmodifyinvoices")])])]),e._v(" "),t("h2",{attrs:{id:"3-貢献"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#3-貢献"}},[e._v("#")]),e._v(" 3. 貢献")]),e._v(" "),t("p",[e._v("BTCPay は世界中のボランティアコントリビューターによって構築・保守されています。新しい貢献を歓迎し、感謝しています。")]),e._v(" "),t("p",[e._v("貢献したい方は、プルリクエストを開く前に、まず "),t("a",{attrs:{href:"https://github.com/btcpayserver/prestashop-plugin/issues/new/choose",target:"_blank",rel:"noopener noreferrer"}},[e._v("issue を作成"),t("OutboundLink")],1),e._v(" するか、"),t("a",{attrs:{href:"https://chat.btcpayserver.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("コミュニティチャット"),t("OutboundLink")],1),e._v(" に参加してください。早い段階でフィードバックを得たり、最適な進め方を議論したり、作業重複を防げます。")]),e._v(" "),t("h2",{attrs:{id:"prestashop-サポート"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prestashop-サポート"}},[e._v("#")]),e._v(" PrestaShop サポート")]),e._v(" "),t("p",[e._v("PrestaShop のサポートは公式チャネルで提供されています。")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.prestashop.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Homepage"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://doc.prestashop.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Documentation"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.prestashop.com/forums",target:"_blank",rel:"noopener noreferrer"}},[e._v("Support Forums"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=s.exports},661:function(e,t,r){e.exports=r.p+"assets/img/module-install.f1082be9.jpg"},662:function(e,t,r){e.exports=r.p+"assets/img/api-key-setup.0ba02f77.jpg"},663:function(e,t,r){e.exports=r.p+"assets/img/invalid-token-popup.e876ae99.jpg"},664:function(e,t,r){e.exports=r.p+"assets/img/success.a9d2a1d5.jpg"}}]);