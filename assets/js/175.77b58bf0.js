(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{1039:function(t,e,r){"use strict";r.r(e);var a=r(17),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[e("span",{attrs:{id:"13-restarting-a-service"}}),t._v(" "),e("span",{attrs:{id:"21-btcpay-logs"}}),t._v(" "),e("span",{attrs:{id:"23-bitcoin-node-logs"}})]),t._v(" "),e("h1",{attrs:{id:"btcpay-server-の問題をトラブルシューティングする"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#btcpay-server-の問題をトラブルシューティングする"}},[t._v("#")]),t._v(" BTCPay Server の問題をトラブルシューティングする")]),t._v(" "),e("p",[t._v("問題が起きるのは決して楽しいことではありません。このドキュメントでは、"),e("strong",[t._v("問題を特定する")]),t._v("ために役立つ最も一般的な手順を説明し、可能であれば自分で、またはコミュニティの助けを借りて解決できるようにします。")]),t._v(" "),e("p",[t._v("問題の特定は非常に重要です。")]),t._v(" "),e("h2",{attrs:{id:"1-問題を再現する"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#1-問題を再現する"}},[t._v("#")]),t._v(" 1. 問題を再現する")]),t._v(" "),e("p",[t._v("まず最初に、問題がいつ発生するのかを確認してください。\n問題を再現できるか試してください。\nサーバーを更新して再起動し、同じ問題を再現できるか確認してください。\n問題の説明に役立つと思う場合は、スクリーンショットを撮ってください。")]),t._v(" "),e("h3",{attrs:{id:"11-サーバーを更新する"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#11-サーバーを更新する"}},[t._v("#")]),t._v(" 1.1 サーバーを更新する")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/FAQ/ServerSettings/#how-can-i-see-my-btcpay-version"}},[t._v("BTCPay のバージョン")]),t._v("を確認してください。\n現在のバージョンが BTCPay の"),e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("最新バージョン"),e("OutboundLink")],1),t._v("よりかなり古い場合、"),e("RouterLink",{attrs:{to:"/FAQ/ServerSettings/#how-to-update-btcpay-server"}},[t._v("サーバーの更新")]),t._v("で問題が解決する可能性があります。")],1),t._v(" "),e("h3",{attrs:{id:"12-サーバーを再起動する"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#12-サーバーを再起動する"}},[t._v("#")]),t._v(" 1.2 サーバーを再起動する")]),t._v(" "),e("p",[t._v("サーバーの再起動は、多くの一般的な BTCPay Server の問題を簡単に解決できる方法です。\n再起動するには、"),e("RouterLink",{attrs:{to:"/FAQ/ServerSettings/#how-to-ssh-into-my-btcpay-running-on-vps"}},[t._v("サーバーに SSH 接続")]),t._v("する必要がある場合があります。")],1),t._v(" "),e("h3",{attrs:{id:"13-サービスを再起動する"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#13-サービスを再起動する"}},[t._v("#")]),t._v(" 1.3 サービスを再起動する")]),t._v(" "),e("p",[t._v("問題によっては、BTCPay Server デプロイ内の特定サービスだけを再起動すれば解決する場合があります。\nたとえば、SSL 証明書更新のために letsencrypt コンテナを再起動します。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" btcpayserver-docker\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" restart letsencrypt-nginx-proxy-companion\n")])])]),e("p",[t._v("別のサービスを再起動したい場合は、"),e("code",[t._v("docker ps")]),t._v(" でサービス名を確認してください。")]),t._v(" "),e("p",[e("a",{attrs:{id:"2-looking-through-the-logs"}})]),t._v(" "),e("h2",{attrs:{id:"2-ログを確認する"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#2-ログを確認する"}},[t._v("#")]),t._v(" 2. ログを確認する")]),t._v(" "),e("p",[t._v("ログには、問題解決に不可欠な情報が含まれていることがあります。\n以下では、"),e("strong",[t._v("BTCPay の各コンポーネントのログ情報")]),t._v("を取得する方法を説明します。")]),t._v(" "),e("h3",{attrs:{id:"21-btcpay-ログ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#21-btcpay-ログ"}},[t._v("#")]),t._v(" 2.1 BTCPay ログ")]),t._v(" "),e("p",[t._v("v1.0.3.8 以降、BTCPay Server のログをフロントエンドから簡単に確認できます。\nサーバー管理者であれば、"),e("strong",[t._v("Server Settings > Logs")]),t._v(" に移動してログファイルを開いてください。\nログ内の特定エラーの意味がわからない場合は、トラブルシューティング時に必ずその内容を共有してください。")]),t._v(" "),e("p",[t._v("さらに詳細なログが必要で、Docker デプロイを使っている場合は、コマンドラインで個別の Docker コンテナのログを確認できます。\nVPS 上で動作している BTCPay インスタンスに "),e("RouterLink",{attrs:{to:"/FAQ/ServerSettings/#how-to-ssh-into-my-btcpay-running-on-vps"}},[t._v("SSH 接続する手順")]),t._v("を参照してください。")],1),t._v(" "),e("p",[t._v("以下は、BTCPay でよく使われるコンテナ名の一覧です。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("ログ対象")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("コンテナ名")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("BTCPayServer")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("generated_btcpayserver_1")])]),t._v(" "),e("tr",[e("td",[t._v("NBXplorer")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("generated_nbxplorer_1")])]),t._v(" "),e("tr",[e("td",[t._v("Bitcoind")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("btcpayserver_bitcoind")])]),t._v(" "),e("tr",[e("td",[t._v("Postgres")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("generated_postgres_1")])]),t._v(" "),e("tr",[e("td",[t._v("proxy")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("letsencrypt-nginx-proxy-companion")])]),t._v(" "),e("tr",[e("td",[t._v("Nginx")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("nginx-gen")])]),t._v(" "),e("tr",[e("td",[t._v("Nginx")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("nginx")])]),t._v(" "),e("tr",[e("td",[t._v("Core Lightning (CLN)")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("btcpayserver_clightning_bitcoin")])]),t._v(" "),e("tr",[e("td",[t._v("LND")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("btcpayserver_lnd_bitcoin")])]),t._v(" "),e("tr",[e("td",[t._v("RTL")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("generated_lnd_bitcoin_rtl_1")])]),t._v(" "),e("tr",[e("td",[t._v("Thunderhub")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("generated_bitcoin_thub_1")])]),t._v(" "),e("tr",[e("td",[t._v("LibrePatron")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("librepatron")])]),t._v(" "),e("tr",[e("td",[t._v("Tor")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("tor-gen")])]),t._v(" "),e("tr",[e("td",[t._v("Tor")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("tor")])])])]),t._v(" "),e("p",[t._v("以下のコマンドで、コンテナ名を指定してログを表示できます。\n他のコンテナログを見たい場合は、コンテナ名を置き換えてください。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" -\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" btcpayserver-docker\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" logs "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--tail")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" generated_btcpayserver_1\n")])])]),e("h3",{attrs:{id:"22-lightning-network-ログ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#22-lightning-network-ログ"}},[t._v("#")]),t._v(" 2.2 Lightning Network ログ")]),t._v(" "),e("p",[t._v("Lightning Network で問題がある場合は、以下を利用してください。")]),t._v(" "),e("h3",{attrs:{id:"221-lightning-network-lnd-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#221-lightning-network-lnd-docker"}},[t._v("#")]),t._v(" 2.2.1 - Lightning Network LND - Docker")]),t._v(" "),e("p",[t._v("Docker 利用時に LND ログへアクセスする方法はいくつかあります。\nまず root としてログインします。")]),t._v(" "),e("p",[e("code",[t._v("sudo su -")])]),t._v(" "),e("p",[t._v("正しいディレクトリへ移動します。")]),t._v(" "),e("p",[e("code",[t._v("cd btcpayserver-docker")])]),t._v(" "),e("p",[t._v("コンテナ名を確認します。")]),t._v(" "),e("p",[e("code",[t._v("docker ps")])]),t._v(" "),e("p",[t._v("コンテナ名でログを表示します。")]),t._v(" "),e("p",[e("code",[t._v("docker logs --tail 100 btcpayserver_lnd_bitcoin")])]),t._v(" "),e("p",[t._v("あるいは、コンテナ ID（先頭の一意な数文字だけで可）でも簡単に表示できます。")]),t._v(" "),e("p",[e("code",[t._v("docker logs 'add your container ID '")])]),t._v(" "),e("p",[t._v("何らかの理由でさらに多くのログが必要な場合")]),t._v(" "),e("p",[e("code",[t._v("sudo su -")])]),t._v(" "),e("p",[e("code",[t._v("cd /var/lib/docker/volumes/generated_lnd_bitcoin_datadir/_data/logs/bitcoin/mainnet/")])]),t._v(" "),e("p",[t._v("そのディレクトリ内で "),e("code",[t._v("ls")]),t._v(" を実行します。")]),t._v(" "),e("p",[e("code",[t._v("lnd.log lnd.log.13 lnd.log.15 lnd.log.16.gz lnd.log.17.gz")]),t._v(" のようなファイルが表示されます。")]),t._v(" "),e("p",[t._v("未圧縮ログを読むには "),e("code",[t._v("cat lnd.log")]),t._v("、別のログなら "),e("code",[t._v("cat lnd.log.15")]),t._v(" を使います。")]),t._v(" "),e("p",[e("code",[t._v(".gzip")]),t._v(" の圧縮ログを読むには "),e("code",[t._v("gzip -d lnd.log.16.gz")]),t._v(" を使います（この例では "),e("code",[t._v("lnd.log.16.gz")]),t._v("）。")]),t._v(" "),e("p",[t._v("これで新しいファイルが生成され、"),e("code",[t._v("cat lnd.log.16")]),t._v(" で表示できます。")]),t._v(" "),e("p",[t._v("上記でうまくいかない場合は、先に gzip をインストールする必要があるかもしれません: "),e("code",[t._v("sudo apt-get install gzip")])]),t._v(" "),e("h3",{attrs:{id:"222-lightning-network-core-lightning-cln-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#222-lightning-network-core-lightning-cln-docker"}},[t._v("#")]),t._v(" 2.2.2 - Lightning Network Core Lightning (CLN) - Docker")]),t._v(" "),e("p",[e("code",[t._v("sudo su -")])]),t._v(" "),e("p",[e("code",[t._v("docker ps")])]),t._v(" "),e("p",[t._v("Core Lightning (CLN) コンテナ ID を見つけます。")]),t._v(" "),e("p",[t._v("docker logs 'add your container ID here'")]),t._v(" "),e("p",[t._v("または、次のコマンドを使います。")]),t._v(" "),e("p",[e("code",[t._v("docker logs --tail 100 btcpayserver_clightning_bitcoin")])]),t._v(" "),e("p",[t._v("Core Lightning (CLN) の cli コマンドでもログ情報を取得できます。")]),t._v(" "),e("p",[e("code",[t._v("bitcoin-lightning-cli.sh getlog")])]),t._v(" "),e("h2",{attrs:{id:"23-bitcoin-node-ログ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#23-bitcoin-node-ログ"}},[t._v("#")]),t._v(" 2.3 - Bitcoin Node ログ")]),t._v(" "),e("p",[t._v("Bitcoind コンテナの"),e("a",{attrs:{href:"#2-looking-through-the-logs"}},[t._v("ログ確認")]),t._v("に加えて、"),e("a",{attrs:{href:"https://developer.bitcoin.org/reference/rpc/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("bitcoin-cli コマンド"),e("OutboundLink")],1),t._v("を使って bitcoin ノード情報を取得することもできます。\nBTCPay には、Bitcoin ノードと簡単に通信できるスクリプトが含まれています。")]),t._v(" "),e("p",[e("code",[t._v("btcpayserver-docker")]),t._v(" フォルダ内で、ノードからブロックチェーン情報を取得します。")]),t._v(" "),e("p",[e("code",[t._v("bitcoin-cli.sh getblockchaininfo")])]),t._v(" "),e("h2",{attrs:{id:"3-自分で解決策を探す（google、faq、github-issues）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#3-自分で解決策を探す（google、faq、github-issues）"}},[t._v("#")]),t._v(" 3. 自分で解決策を探す（Google、FAQ、GitHub issues）")]),t._v(" "),e("p",[t._v("環境は異なっていても、同じ問題を他の誰かがすでに経験している可能性は高いです。\n少し時間を取って検索し、自分で解決できるか確認してみてください。")]),t._v(" "),e("h3",{attrs:{id:"31-btcpay-faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#31-btcpay-faq"}},[t._v("#")]),t._v(" 3.1 BTCPay FAQ")]),t._v(" "),e("p",[t._v("よくある問題は "),e("RouterLink",{attrs:{to:"/FAQ/"}},[t._v("Frequently Asked Questions ページ")]),t._v("に記録するようにしています。\n質問が載っているか確認してください。")],1),t._v(" "),e("h3",{attrs:{id:"32-github"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#32-github"}},[t._v("#")]),t._v(" 3.2 GitHub")]),t._v(" "),e("p",[t._v("高度な技術的問題がある場合、ユーザーは GitHub に issue を作成することが多いです。\nBTCPay の GitHub リポジトリで "),e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver/issues?q=is%3Aissue+is%3Aclosed",target:"_blank",rel:"noopener noreferrer"}},[t._v("クローズ済み issue を検索"),e("OutboundLink")],1),t._v("してみてください。")]),t._v(" "),e("h3",{attrs:{id:"33-mattermost"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#33-mattermost"}},[t._v("#")]),t._v(" 3.3 Mattermost")]),t._v(" "),e("p",[t._v("Mattermost チャットは、他のユーザーが以前に経験した類似問題を探すのに適しています。\n右上の検索をクリックし、クエリを入力してください。")]),t._v(" "),e("h2",{attrs:{id:"4-助けを求める"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#4-助けを求める"}},[t._v("#")]),t._v(" 4. 助けを求める")]),t._v(" "),e("p",[t._v("自分で問題を解決できなくても心配いりません。\n助けてくれる活発なコミュニティがあります。")]),t._v(" "),e("p",[t._v("問題をより正確に説明するほど、迅速に解決できる可能性が高くなります。\n簡潔に、かつ関連情報をできるだけ多く提供してください。\n"),e("RouterLink",{attrs:{to:"/FAQ/ServerSettings/#how-can-i-see-my-btcpay-version"}},[t._v("利用中のバージョン")]),t._v("と BTCPay のデプロイ構成は必ず含めてください。\n何をしようとしていて、何が問題なのかを説明してください。\n可能であればログを添付してください。\n関連があるなら、スクリーンショットもぜひ追加してください。")],1),t._v(" "),e("p",[t._v("以下は、質問の良い例です。")]),t._v(" "),e("blockquote",[e("p",[t._v("XYZ で問題が発生しています。問題は再現できます。BTCPay バージョンは 0.100.31 で、Docker deployment guide に従って Digital Ocean にサーバーをデプロイしました。FAQ とクローズ済み GitHub issues を調べましたが解決策が見つかりません。私の BTCPay セットアップは XYZ で、XYZ を実行すると問題が発生します。BTCPay インスタンスから取得できたログは以下です。添付画像にエラーが表示されています。")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("注意:")]),t._v(" "),e("p",[t._v("コミュニティはカスタムデプロイに対して広範なサポートを提供しません。\nつまり、"),e("RouterLink",{attrs:{to:"/Deployment/ManualDeployment/"}},[t._v("Manual Deployments")]),t._v(" のような構成は、開発目的および "),e("strong",[t._v("デプロイとメンテナンスの問題を自力で解決できる")]),t._v(" 技術的知識を持つユーザー向けです。これには "),e("RouterLink",{attrs:{to:"/Deployment/HardwareAsAService/"}},[t._v("Hardware-As-A-Service")]),t._v(" 製品（Nodl、RaspiBlitz、Umbrel など）も含まれます。")],1)]),t._v(" "),e("h3",{attrs:{id:"41-コミュニティに質問する（一般的な問題）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#41-コミュニティに質問する（一般的な問題）"}},[t._v("#")]),t._v(" 4.1 コミュニティに質問する（一般的な問題）")]),t._v(" "),e("p",[t._v("基本的な問題に素早く回答を得るには、"),e("a",{attrs:{href:"https://chat.btcpayserver.org/btcpayserver/channels/support",target:"_blank",rel:"noopener noreferrer"}},[t._v("BTCPay Mattermost"),e("OutboundLink")],1),t._v(" の #support チャンネルで質問するのが最適です。")]),t._v(" "),e("h3",{attrs:{id:"42-github-で-issue-を作成する（高度な問題）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#42-github-で-issue-を作成する（高度な問題）"}},[t._v("#")]),t._v(" 4.2 GitHub で Issue を作成する（高度な問題）")]),t._v(" "),e("p",[t._v("カスタムビルド環境で複雑な問題に直面している場合は、開発者が対応できるよう "),e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub で issue を作成"),e("OutboundLink")],1),t._v("してください。")]),t._v(" "),e("h3",{attrs:{id:"43-premium-support"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#43-premium-support"}},[t._v("#")]),t._v(" 4.3 Premium Support")]),t._v(" "),e("p",[t._v("一部のコミュニティメンバーは有償サポートを提供しています。\nより迅速なサポートが必要な場合は、"),e("RouterLink",{attrs:{to:"/Support/"}},[t._v("premium support 提供メンバーの一覧")]),t._v("を確認してください。")],1),t._v(" "),e("h3",{attrs:{id:"44-lightning-network-サポート"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#44-lightning-network-サポート"}},[t._v("#")]),t._v(" 4.4 Lightning Network サポート")]),t._v(" "),e("p",[t._v("Lightning Network 実装に関する技術的問題がある場合は、それぞれのコミュニティで質問することを検討してください。")]),t._v(" "),e("h4",{attrs:{id:"441-lnd-サポート"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#441-lnd-サポート"}},[t._v("#")]),t._v(" 4.4.1 LND サポート")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/lightningnetwork/lnd/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("LND GitHub"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://lightningcommunity.slack.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lightning Community on Slack"),e("OutboundLink")],1)])]),t._v(" "),e("h4",{attrs:{id:"442-core-lightning-cln-サポート"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#442-core-lightning-cln-サポート"}},[t._v("#")]),t._v(" 4.4.2 Core Lightning (CLN) サポート")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/ElementsProject/lightning/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("CLN GitHub"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://t.me/lightningd",target:"_blank",rel:"noopener noreferrer"}},[t._v("CLN Telegram Group"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://lightning.readthedocs.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CLN docs"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=n.exports}}]);