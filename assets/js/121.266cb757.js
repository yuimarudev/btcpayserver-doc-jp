(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{938:function(e,r,a){"use strict";a.r(r);var t=a(17),n=Object(t.a)({},(function(){var e=this,r=e._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"dynamic-dns-サービス"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-dns-サービス"}},[e._v("#")]),e._v(" Dynamic DNS サービス")]),e._v(" "),r("h2",{attrs:{id:"背景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[e._v("#")]),e._v(" 背景")]),e._v(" "),r("p",[e._v("次の場合は "),r("strong",[e._v("Dynamic DNS")]),e._v(" が必要です。")]),e._v(" "),r("ul",[r("li",[e._v("デフォルトドメインを提供しないホスティングプロバイダーで BTCPay Server を運用している")]),e._v(" "),r("li",[e._v("独自ドメイン（例: "),r("code",[e._v("mybusiness.com")]),e._v("）を購入したくない")]),e._v(" "),r("li",[e._v("BTCPay Server にインターネット経由で HTTPS アクセスする必要がある（他のインターネット利用者が BTCPayServer にアクセスする）")])]),e._v(" "),r("p",[e._v("この場合、"),r("strong",[e._v("BTCPayServer Dynamic DNS service")]),e._v(" の利用を推奨します。")]),e._v(" "),r("p",[e._v("次の場合は Dynamic DNS Service は "),r("strong",[e._v("不要")]),e._v(" です。")]),e._v(" "),r("ul",[r("li",[e._v("自宅で BTCPay Server をホストし、ローカルネットワーク経由でのみアクセスする（ローカル HTTP または Tor 利用で十分）")]),e._v(" "),r("li",[e._v("BTCPay Server を自分だけが利用する（Tor Browser とインスタンスの Tor アドレスを使用）")]),e._v(" "),r("li",[e._v("ホスティングプロバイダーがデフォルトでドメイン名を提供する（例: Lunanode は "),r("code",[e._v(".lndyn.com")]),e._v(" のサブドメインを無料提供、Azure は "),r("code",[e._v(".azurewebsites.net")]),e._v(" を提供）")])]),e._v(" "),r("p",[r("strong",[e._v("Dynamic DNS Providers")]),e._v(" を使うと、サーバー用に "),r("code",[e._v("example.ddns.net")]),e._v(" のような無料ドメインを持てます。\nさらに Dynamic DNS Providers は、BTCPay Server インスタンスの外部 IP が変わったときに DNS レコードを自動更新するための簡単な API を提供します。")]),e._v(" "),r("p",[e._v("Dynamic DNS を設定した BTCPay Server は、外部 IP 変更を検知すると定期的に DNS レコードを確認し、更新します。")]),e._v(" "),r("h2",{attrs:{id:"使い方"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使い方"}},[e._v("#")]),e._v(" 使い方")]),e._v(" "),r("h3",{attrs:{id:"ステップ-1-ドメインを作成する"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ステップ-1-ドメインを作成する"}},[e._v("#")]),e._v(" ステップ 1: ドメインを作成する")]),e._v(" "),r("p",[e._v("まず Dynamic DNS プロバイダーでアカウントを作成します。代表的なプロバイダーは次のとおりです。")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.noip.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("noip"),r("OutboundLink")],1),e._v(" (free)")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.duckdns.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("duckdns"),r("OutboundLink")],1),e._v(" (free)")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.zoneedit.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("zoneedit"),r("OutboundLink")],1),e._v(" (free)")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://dyn.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("dyndns"),r("OutboundLink")],1),e._v(" (not free)")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://domains.google.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("google"),r("OutboundLink")],1),e._v(" (not free)")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.easydns.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("easydns"),r("OutboundLink")],1),e._v(" (not free)")])]),e._v(" "),r("p",[e._v("アカウント作成後、各プロバイダーのウェブサイトから無料ドメイン名を作成できます。")]),e._v(" "),r("h3",{attrs:{id:"ステップ-2-btcpay-server-で-dynamic-dns-を設定する"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ステップ-2-btcpay-server-で-dynamic-dns-を設定する"}},[e._v("#")]),e._v(" ステップ 2: BTCPay Server で Dynamic DNS を設定する")]),e._v(" "),r("p",[e._v("この操作にはインスタンス管理者権限が必要です。\nServer Settings > Services > Dynamic DNS に移動します。")]),e._v(" "),r("ul",[r("li",[e._v("Dynamic DNS を追加")]),e._v(" "),r("li",[e._v("Dynamic DNS プロバイダーを選択")]),e._v(" "),r("li",[e._v("ステップ 1 で作成したドメインを入力")]),e._v(" "),r("li",[e._v("ステップ 1 で作成したログイン情報とパスワードを追加")]),e._v(" "),r("li",[r("code",[e._v("enabled")]),e._v(" ボックスにチェックして保存")])]),e._v(" "),r("h3",{attrs:{id:"ステップ-3-https-証明書を提供するよう-btcpay-の-docker-インストールを設定する"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ステップ-3-https-証明書を提供するよう-btcpay-の-docker-インストールを設定する"}},[e._v("#")]),e._v(" ステップ 3: HTTPS 証明書を提供するよう BTCPay の docker インストールを設定する")]),e._v(" "),r("p",[e._v("docker デプロイを使用している場合は、BTCPayServer インストール側も更新する必要があります。\nSSH でインスタンスに接続し、次を実行します。")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("BTCPAY_ADDITIONAL_HOSTS")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"example.ddns.net"')]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v(" btcpay-setup.sh "),r("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-i")]),e._v("\n")])])]),r("p",[r("code",[e._v("BTCPAY_ADDITIONAL_HOSTS")]),e._v(" に他のホストがある場合は、"),r("code",[e._v(",")]),e._v(" で区切って追加してください。")])])}),[],!1,null,null,null);r.default=n.exports}}]);