(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{949:function(t,e,a){"use strict";a.r(e);var s=a(17),r=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"ローカル開発"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ローカル開発"}},[t._v("#")]),t._v(" ローカル開発")]),t._v(" "),e("h2",{attrs:{id:"前提条件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),e("p",[e("strong",[t._v("開発環境")]),t._v(" では次のツールをインストールする必要があります。")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://dotnet.microsoft.com/en-us/download/dotnet/8.0",target:"_blank",rel:"noopener noreferrer"}},[t._v(".NET 8.0 SDK"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("Docker: "),e("a",{attrs:{href:"https://docs.docker.com/docker-for-windows/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Windows"),e("OutboundLink")],1),t._v(" | "),e("a",{attrs:{href:"https://docs.docker.com/docker-for-mac/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mac OS"),e("OutboundLink")],1),t._v(" | "),e("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"依存関係"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#依存関係"}},[t._v("#")]),t._v(" 依存関係")]),t._v(" "),e("p",[t._v("テスト実行やデバッグ実行のために、いくつかの "),e("strong",[t._v("依存サービス")]),t._v(" を起動する必要があります。")]),t._v(" "),e("p",[t._v("依存関係はすべて docker-compose ファイルにまとめてあり、これを使って開発環境を立ち上げられます。\n"),e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver/blob/master/BTCPayServer.Tests/docker-compose.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("BTCPayServer.Tests/docker-compose.yml"),e("OutboundLink")],1),t._v(" を使うと一式を起動できます。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/btcpayserver/btcpayserver.git\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" btcpayserver/BTCPayServer.Tests\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" up dev\n")])])]),e("h2",{attrs:{id:"どの-ide-を使うべきか？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#どの-ide-を使うべきか？"}},[t._v("#")]),t._v(" どの IDE を使うべきか？")]),t._v(" "),e("p",[t._v("Visual Studio 2022（Windows のみ）または Rider（クロスプラットフォーム）を推奨します。Visual Studio Code（クロスプラットフォーム）でも可能ですが、快適な開発環境の構築はやや複雑です。\nもちろん VIM も使えます。.NET Core はコマンドラインでも扱いやすいです。")]),t._v(" "),e("p",[t._v("Visual Studio Code、Visual Studio、Rider は launch profile "),e("code",[t._v("Bitcoin")]),t._v(" を実行します。\nこれにより "),e("strong",[t._v("Docker サービス内の依存関係へ接続する BTCPay Server インスタンス")]),t._v(" が起動し、デバッグやステップ実行が簡単になります。")]),t._v(" "),e("h2",{attrs:{id:"ビルド構成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ビルド構成"}},[t._v("#")]),t._v(" ビルド構成")]),t._v(" "),e("p",[t._v("build configuration は "),e("strong",[t._v("BTCPay Server のビルド方法")]),t._v(" を定義します。たとえば、特定のソースを含めるかどうか、デバッグ最適化か性能最適化かなどです。")]),t._v(" "),e("p",[t._v("利用可能な build configuration は次のとおりです。")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("Debug")])]),t._v(" "),e("li",[e("code",[t._v("Release")])]),t._v(" "),e("li",[e("code",[t._v("Altcoins-Debug")])]),t._v(" "),e("li",[e("code",[t._v("Altcoins-Release")])])]),t._v(" "),e("p",[t._v("ローカル開発中に別構成を使う方法は IDE によって異なります。\nデフォルトは "),e("code",[t._v("Debug")]),t._v(" で、これは altcoin 依存関係を含まない Bitcoin 専用ビルドです。別構成の使い方は IDE に依存します。")]),t._v(" "),e("p",[e("code",[t._v("dotnet")]),t._v(" コマンドラインでは "),e("code",[t._v("-c")]),t._v(" スイッチでビルド構成を選択できます。コマンドラインで Release ビルドを実行する場合は次のとおりです。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("dotnet run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" Release\n")])])]),e("h2",{attrs:{id:"launch-profiles"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#launch-profiles"}},[t._v("#")]),t._v(" Launch profiles")]),t._v(" "),e("p",[e("strong",[t._v("ローカル開発のために BTCPay Server をローカル起動")]),t._v(" する際は、docker-compose の開発用依存関係へ接続するための適切なパラメータが必要です。")]),t._v(" "),e("p",[t._v("これらのパラメータは dotnet の "),e("code",[t._v("launch profile")]),t._v(" という仕組みにまとめられています。")]),t._v(" "),e("p",[t._v("launch profile は "),e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver/blob/master/BTCPayServer/Properties/launchSettings.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("launchSettings.json"),e("OutboundLink")],1),t._v(" で定義されています。")]),t._v(" "),e("p",[t._v("現在は次の3つがあります。")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("Bitcoin")])]),t._v(" "),e("li",[e("code",[t._v("Bitcoin-HTTPS")])]),t._v(" "),e("li",[e("code",[t._v("Altcoins-HTTPS")])])]),t._v(" "),e("p",[t._v("デフォルトは "),e("code",[t._v("Bitcoin")]),t._v(" です。別の profile を使う方法は IDE によって異なります。")]),t._v(" "),e("p",[t._v("コマンドラインを使う場合、"),e("code",[t._v("dotnet run")]),t._v(" で任意の launch profile を選択できます。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("dotnet run --launch-profile Bitcoin\n")])])]),e("h2",{attrs:{id:"テスト実行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#テスト実行"}},[t._v("#")]),t._v(" テスト実行")]),t._v(" "),e("p",[t._v("テスト実行は、開発時の BTCPay Server 実行とほぼ同じ仕組みで動作します。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" BTCPayServer.Tests\ndotnet "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n")])])]),e("p",[t._v("テストでは "),e("code",[t._v("launch profile")]),t._v(" の概念は適用されませんが、build configuration は適用されます。たとえば Release ビルドでテストしたい場合は次のとおりです。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("dotnet "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" Release\n")])])]),e("p",[t._v("テストは、先ほど示した docker-compose の開発用依存関係を使うよう、すでに設定済みです。")]),t._v(" "),e("p",[t._v("特定のテストだけを実行するには "),e("code",[t._v("--f")]),t._v("（filter）スイッチを使えます。")]),t._v(" "),e("p",[t._v("IDE を使う場合は、テスト実行や構成切り替えについて IDE のドキュメントを参照してください。")]),t._v(" "),e("h2",{attrs:{id:"altcoin-サポート開発"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#altcoin-サポート開発"}},[t._v("#")]),t._v(" Altcoin サポート開発")]),t._v(" "),e("p",[t._v("デフォルトでは、IDE または単純な "),e("code",[t._v("dotnet run")]),t._v(" は "),e("code",[t._v("Debug")]),t._v(" ビルド上の "),e("code",[t._v("Bitcoin")]),t._v(" launch profile を使用します。")]),t._v(" "),e("ul",[e("li",[t._v("これは、BTCPay Server がローカル HTTP ポートで起動し、altcoin サポートなしでビルドされることを意味します。")]),t._v(" "),e("li",[t._v("また、"),e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver/blob/master/BTCPayServer.Tests/docker-compose.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("BTCPayServer.Tests/docker-compose.yml"),e("OutboundLink")],1),t._v(" に定義された Bitcoin 専用依存関係へ接続します。")])]),t._v(" "),e("p",[e("strong",[t._v("altcoins サポート付きで開発")]),t._v(" したい場合は、"),e("code",[t._v("Altcoins-Debug")]),t._v(" ビルドで "),e("code",[t._v("Altcoins-HTTPS")]),t._v(" launch profile を使い、"),e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver/blob/master/BTCPayServer.Tests/docker-compose.altcoins.yml",target:"_blank",rel:"noopener noreferrer"}},[t._v("BTCPayServer.Tests/docker-compose.altcoins.yml"),e("OutboundLink")],1),t._v(" を実行してください。")]),t._v(" "),e("p",[t._v("コマンドラインを使う場合:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" BTCPayServer.Tests\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" docker-compose.altcoins.yml up dev\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/BTCPayServer\ndotnet run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" Altcoins-Debug --launch-profile Altcoins-HTTPS\n")])])]),e("p",[t._v("テストの場合:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" BTCPayServer.Tests\ndotnet "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" Altcoins-Debug\n")])])]),e("h2",{attrs:{id:"ローカル開発での-https-サポート"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ローカル開発での-https-サポート"}},[t._v("#")]),t._v(" ローカル開発での HTTPS サポート")]),t._v(" "),e("p",[t._v("一部ブラウザのセキュリティ機能を正しく検証するには "),e("strong",[t._v("HTTPS")]),t._v(" が必要な場合があります。")]),t._v(" "),e("p",[t._v("その場合は "),e("code",[t._v("Bitcoin-HTTPS")]),t._v("（または "),e("code",[t._v("Altcoin-HTTPS")]),t._v("）launch profile を使用します。開発用の自己署名証明書が作成されます。")]),t._v(" "),e("p",[t._v("ただし、ブラウザはこの証明書を信頼しないため、デバッグしづらくなることがあります。")]),t._v(" "),e("p",[t._v("次を実行すると、OS にこの開発用証明書を信頼させることができます。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("dotnet dev-certs https "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--trust")]),t._v("\n")])])]),e("h2",{attrs:{id:"動画"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#動画"}},[t._v("#")]),t._v(" 動画")]),t._v(" "),e("p",[t._v("詳細は次の動画を参照してください。")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://youtube.com/watch?v=ZePbMPSIvHM",target:"_blank",rel:"noopener noreferrer"}},[t._v("BTCPay Server 開発への貢献方法（Windows）"),e("OutboundLink")],1),t._v(" by Nicolas Dorier")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://youtube.com/watch?v=j486T_Rk-yw",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux（Ubuntu）で BTCPayServer 開発環境を構築する"),e("OutboundLink")],1),t._v(" by RockStarDev")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://youtube.com/watch?v=GWR_CcMsEV0",target:"_blank",rel:"noopener noreferrer"}},[t._v("BTCPay Server 開発 - Pull Request と支払いのテスト（MacOS）"),e("OutboundLink")],1),t._v(" by Pavlenex")])]),t._v(" "),e("p",[t._v("あわせて次のノートも参照してください。")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/btcpayserver/btcpayserver/blob/master/BTCPayServer.Tests/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("開発の始め方"),e("OutboundLink")],1),t._v(" by Nicolas Dorier（関連する Docker コマンドと regtest 請求書の支払い手順を解説）")])]),t._v(" "),e("h2",{attrs:{id:"how-to-manually-test-payments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-manually-test-payments"}},[t._v("#")]),t._v(" How to manually test payments")]),t._v(" "),e("h3",{attrs:{id:"using-the-test-bitcoin-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-the-test-bitcoin-cli"}},[t._v("#")]),t._v(" Using the test bitcoin-cli")]),t._v(" "),e("p",[t._v("You can call bitcoin-cli inside the container with "),e("code",[t._v("docker exec")]),t._v(".\nFor example, if you want to send "),e("code",[t._v("0.23111090")]),t._v(" to "),e("code",[t._v("mohu16LH66ptoWGEL1GtP6KHTBJYXMWhEf")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("./docker-bitcoin-cli.sh sendtoaddress "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mohu16LH66ptoWGEL1GtP6KHTBJYXMWhEf"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.23111090")]),t._v("\n")])])]),e("p",[t._v("If you are using Powershell:")]),t._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\\docker-bitcoin-"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cli")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ps1 sendtoaddress "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mohu16LH66ptoWGEL1GtP6KHTBJYXMWhEf"')]),t._v(" 0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("23111090\n")])])]),e("p",[t._v("You can also generate blocks:")]),t._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\\docker-bitcoin-generate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ps1 3\n")])])]),e("h3",{attrs:{id:"using-polar-to-test-lightning-payments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-polar-to-test-lightning-payments"}},[t._v("#")]),t._v(" Using Polar to test Lightning payments")]),t._v(" "),e("ul",[e("li",[t._v("Install and run "),e("a",{attrs:{href:"https://lightningpolar.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Polar"),e("OutboundLink")],1),t._v(". Setup a small network of nodes.")]),t._v(" "),e("li",[t._v("Go to your store's General Settings and enable Lightning.")]),t._v(" "),e("li",[t._v("Build your connection string using the Connect information in the Polar app.")])]),t._v(" "),e("p",[t._v('LND Connection string example:\ntype=lnd-rest;server=https://127.0.0.1:8084/;macaroonfilepath="local path to admin.macaroon on your computer, without these quotes";allowinsecure=true')]),t._v(" "),e("p",[t._v("Now you can create a Lightning invoice on BTCPay Server regtest and make a payment through Polar.")]),t._v(" "),e("p",[t._v('PLEASE NOTE: You may get an exception break in Visual Studio. You must quickly click "Continue" in VS so the invoice is generated.\nOr, uncheck the box that says, "Break when this exception type is thrown".')]),t._v(" "),e("h3",{attrs:{id:"using-the-test-litecoin-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-the-test-litecoin-cli"}},[t._v("#")]),t._v(" Using the test litecoin-cli")]),t._v(" "),e("p",[t._v("Same as bitcoin-cli, but with "),e("code",[t._v(".\\docker-litecoin-cli.ps1")]),t._v(" and "),e("code",[t._v(".\\docker-litecoin-cli.sh")]),t._v(" instead.")]),t._v(" "),e("h3",{attrs:{id:"using-the-test-lightning-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-the-test-lightning-cli"}},[t._v("#")]),t._v(" Using the test lightning-cli")]),t._v(" "),e("p",[t._v("If you are using Linux:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("./docker-customer-lightning-cli.sh pay lnbcrt100u1pd2e6uspp5ajnadvhazjrz55twd5k6yeg9u87wpw0q2fdr7g960yl5asv5fmnqdq9d3hkccqpxmedyrk0ehw5ueqx5e0r4qrrv74cewddfcvsxaawqz7634cmjj39sqwy5tvhz0hasktkk6t9pqfdh3edmf3z09zst5y7khv3rvxh8ctqqw6mwhh\n")])])]),e("p",[t._v("If you are using Powershell:")]),t._v(" "),e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\\docker-customer-lightning-"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cli")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ps1 pay lnbcrt100u1pd2e6uspp5ajnadvhazjrz55twd5k6yeg9u87wpw0q2fdr7g960yl5asv5fmnqdq9d3hkccqpxmedyrk0ehw5ueqx5e0r4qrrv74cewddfcvsxaawqz7634cmjj39sqwy5tvhz0hasktkk6t9pqfdh3edmf3z09zst5y7khv3rvxh8ctqqw6mwhh\n")])])]),e("p",[t._v("If you get this message:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("205")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Could not find a route"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"getroute_tries"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sendpay_tries"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Please, run the test "),e("code",[t._v("CanSetLightningServer")]),t._v(", this will establish a channel between the customer and the merchant, then, retry.")]),t._v(" "),e("p",[t._v("Alternatively you can run the "),e("code",[t._v("./docker-lightning-channel-setup.sh")]),t._v(" script to establish the channel connection.\nThe "),e("code",[t._v("./docker-lightning-channel-teardown.sh")]),t._v(" script closes any existing lightning channels.")]),t._v(" "),e("h3",{attrs:{id:"alternative-lightning-testing-using-polar-to-test-lightning-payments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#alternative-lightning-testing-using-polar-to-test-lightning-payments"}},[t._v("#")]),t._v(" Alternative Lightning testing: Using Polar to test Lightning payments")]),t._v(" "),e("ul",[e("li",[t._v("Install and run "),e("a",{attrs:{href:"https://lightningpolar.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Polar"),e("OutboundLink")],1),t._v(". Setup a small network of nodes.")]),t._v(" "),e("li",[t._v("Go to your store's General Settings and enable Lightning.")]),t._v(" "),e("li",[t._v("Build your connection string using the Connect information in the Polar app.")])]),t._v(" "),e("p",[t._v('LND Connection string example:\ntype=lnd-rest;server=https://127.0.0.1:8084/;macaroonfilepath="local path to admin.macaroon on your computer, without these quotes";allowinsecure=true')]),t._v(" "),e("p",[t._v("Now you can create a lightning invoice on BTCPay Server regtest and make a payment through Polar.")]),t._v(" "),e("p",[t._v('PLEASE NOTE: You may get an exception break in Visual Studio. You must quickly click "Continue" in VS so the invoice is generated.\nOr, uncheck the box that says, "Break when this exception type is thrown".')]),t._v(" "),e("h2",{attrs:{id:"faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[t._v("#")]),t._v(" FAQ")]),t._v(" "),e("h3",{attrs:{id:"docker-compose-up-dev-failed-or-tests-are-not-passing-what-should-i-do"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-up-dev-failed-or-tests-are-not-passing-what-should-i-do"}},[t._v("#")]),t._v(" "),e("code",[t._v("docker-compose up dev")]),t._v(" failed or tests are not passing, what should I do?")]),t._v(" "),e("ol",[e("li",[t._v("Run "),e("code",[t._v("docker-compose down --volumes")]),t._v(" (this will reset your test environment)")]),t._v(" "),e("li",[t._v("Run "),e("code",[t._v("docker-compose pull")]),t._v(" (this will ensure you have the latest images)")]),t._v(" "),e("li",[t._v("Run again with "),e("code",[t._v("docker-compose up dev")])])]),t._v(" "),e("h3",{attrs:{id:"how-to-run-the-altcoin-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#how-to-run-the-altcoin-environment"}},[t._v("#")]),t._v(" How to run the Altcoin environment?")]),t._v(" "),e("p",[e("code",[t._v("docker-compose -f docker-compose.altcoins.yml up dev")])]),t._v(" "),e("p",[t._v("If you still have issues, try to restart docker.")])])}),[],!1,null,null,null);e.default=r.exports}}]);